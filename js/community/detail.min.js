"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),DetailController=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));$(".icon-back").on("click",function(){window.history.go(-1)}),require(["../components/album.min","../components/preview-image.min"],function(e,t){t(".subestate-comments")});var o=e,n=$("#estateNameEcharts").attr("data-encryptsubestateid");return e.request(e.apiUrl.community.chart,{subEstateId:n},{successCallback:function(e){if(1==e.status){var t=e,n=o.recombineM(t.data);o.echartFun(n)}}}),e}return _inherits(t,e),_createClass(t,[{key:"echartFun",value:function(e){var t=[],o=0,n=!0;if(e.seriesData.forEach(function(e,r){0==e?(t.push(null),o+=1,11==o&&10==r&&(n=!1)):t.push(parseFloat(e))}),!n)return void $("#estateNameEcharts").hide();var r=e.seriesData.sort(function(e,t){return parseFloat(e)-parseFloat(t)}),a=1e3*Math.ceil(r[r.length-1]/1e3),i=[];r.forEach(function(e,t){0!=e&&i.push(e)});var s=1e3*Math.ceil(i[0]/1e3-1),c=1e3;r[r.length-1]==i[0]?(s-=2e3,c=1e3):c=(a-s)/4<1e3?1e3:1e3*Math.ceil((a-s)/4e3),s=s<0?0:s;var l=s-c>0||0==s?"#979797":"#fff",u=echarts.init(document.getElementById("main"),{width:"88%"}),f=this,h=$("#estateName").attr("data-houseid"),p=$("#estateName").attr("data-subestateid"),m={eventName:"1067014",eventParam:{house_id:h,estate_id:p},type:2},b={tooltip:{trigger:"item",triggerOn:"click",position:"top",backgroundColor:"#4081D6",padding:4,textStyle:{color:"#fff",fontSize:"12"},formatter:function(e,t,o){var n=e.value+"元";return f.request(f.apiUrl.common.bigData,m,function(){}),n}},grid:{bottom:20,left:"3%",right:"10%",containLabel:!0},xAxis:{data:e.monthList,splitLine:{show:!1},axisTick:{show:!1},position:"bottom",type:"category",boundaryGap:!1,axisLine:{lineStyle:{color:l}},axisLabel:{interval:0,rotate:0,textStyle:{color:"#999",fontSize:12,fontFamily:"微软雅黑"}}},yAxis:{axisLine:{show:!1},splitLine:{show:!0,lineStyle:{color:["#979797"]}},axisTick:{show:!1},axisLabel:{inside:!1,textStyle:{color:"#999"},formatter:function(e,t){return 0==t?"":(e/1e4).toFixed(1)+" 万"}},min:s-c,max:s+4*c,interval:c},series:[{name:"销量",type:"line",lineStyle:{normal:{color:"#4081D6"}},itemStyle:{normal:{color:"#4081D6"},emphasis:{borderColor:"#4081D6",borderWidth:2,color:"#4081D6"}},symbolSize:5,connectNulls:!0,data:t}]};u.setOption(b)}},{key:"recombineM",value:function(e){var t={monthList:[],seriesData:[]};return e&&e.forEach(function(e){var o=e.date.split("-")[1];0==o.indexOf("0")?t.monthList.push(o.charAt(1)+"月"):t.monthList.push(o+"月"),t.seriesData.push(e.unitPrice)}),console.log(t),t}}]),t}(Controller);$(document).ready(function(){new DetailController});
//# sourceMappingURL=detail.min.js.map
