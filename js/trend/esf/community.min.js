"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),communityController=function(t){function e(){_classCallCheck(this,e);var t=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),n=$(".echart").attr("data-echart");n&&t.echartFun(t.recombineM(JSON.parse(n))),$(".lazy").lazyload({placeholder:t.staticDomain+"/wkh5_fe/images/common/loading.jpg"});var o=t;return $(".flag>a.esf-item:gt(4)").hide(),require(["../../components/trend-search.min"],function(t){t.init(o),t.selectFun("icon-search")}),new Location({businessType:"esfTrend",cityApiUrl:t.apiUrl.common.getCityByLatLon,identical:function(t){},investmentFlag:function(t){t.investment?$("notopen-investment").show():$("notopen-investment").hide()}}),t}return _inherits(e,t),_createClass(e,[{key:"echartFun",value:function(t){var e=[],n=0,o=!0;if(t.seriesData.forEach(function(t,i){0==t?(e.push(null),n+=1,11==n&&10==i&&(o=!1)):e.push(parseFloat(t))}),!o)return void $("#estateEchart").hide();var i=t.seriesData.sort(function(t,e){return parseFloat(t)-parseFloat(e)}),r=1e3*Math.ceil(i[i.length-1]/1e3),a=[];i.forEach(function(t,e){0!=t&&a.push(t)});var s=1e3*Math.ceil(a[0]/1e3-1),l=1e3;i[i.length-1]==a[0]?(s-=2e3,l=1e3):l=(r-s)/4<1e3?1e3:1e3*Math.ceil((r-s)/4e3),s=s<0?0:s;var c=echarts.init(document.getElementById("main"),{width:"92%"}),u=this,h={tooltip:{trigger:"item",triggerOn:"click",position:"top",backgroundColor:"#4081D6",padding:4,textStyle:{color:"#fff",fontSize:"12"},formatter:function(t,e,n){var o=t.value+"元";return u.request(u.apiUrl.common.bigData,echartBigData,function(){}),o}},grid:{bottom:20,left:"3%",right:"10%",containLabel:!0},xAxis:{data:t.monthList,splitLine:{show:!1},axisTick:{show:!1},position:"bottom",type:"category",boundaryGap:!1,axisLine:{lineStyle:{color:"#979797"}},axisLabel:{interval:0,rotate:0,textStyle:{color:"#999",fontSize:12,fontFamily:"微软雅黑"}}},yAxis:{axisLine:{show:!1},splitLine:{show:!0,lineStyle:{color:["#979797"]}},axisTick:{show:!1},axisLabel:{inside:!1,textStyle:{color:"#999"},formatter:function(t,e){return t==s-l||0==t?"":(t/1e4).toFixed(1)+" 万"}},boundaryGap:!1,position:"right",min:s-l>0?s-l:0,max:s-l>0?s+4*l:5*l,interval:l},series:[{name:"销量",type:"line",lineStyle:{normal:{color:"#4081D6"}},itemStyle:{normal:{color:"#4081D6"},emphasis:{borderColor:"#4081D6",borderWidth:2,color:"#4081D6"}},symbolSize:5,connectNulls:!0,data:e}]};c.setOption(h)}},{key:"recombineM",value:function(t){var e={monthList:[],seriesData:[]};return t&&t.forEach(function(t,n){var o=t.date.split("-")[1];0==o.indexOf("0")?e.monthList.push(o.charAt(1)):e.monthList.push(o),e.seriesData.push(t.unitPrice)}),e.monthList[11]="     "+e.monthList[11]+"   (月)",e}}]),e}(Controller);$(document).ready(function(){new communityController});
//# sourceMappingURL=community.min.js.map
