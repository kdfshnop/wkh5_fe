{"version":3,"sources":["store/index.min.js"],"names":["IndexController","$","eq","addClass","require","BigData","init","bigData","val","tabs","index","attr","find","addEventListener","pullload","window","on","$header","$storeName","scrollTop","hasClass","hide","removeClass","show","click","modal","data","close","esf","aNode","document","createElement","url","bigDataParams","dlNode","append","houseImgUrl","estateName","houseTitle","houseChild","areaStr","totalPrice","district","town","unitPrice","tagNode","isTopHouse","isStorePush","commAgent","fullYears","onlyOne","isSubwayHouse","isSchoolHouse","isNewOnStore","orientation","self","apiUrl","store","house","queryStringObject","callback","each","createEsf","Controller","ready"],"mappings":"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","file":"index.min.js","sourcesContent":["/*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n 1. 项目名称：悟空找房h5\n 2. 页面名称：store -> index(门店扫码)\n 3. 作者：douyadong@lifang.com\n -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\nclass IndexController extends Controller{\n    constructor(){\n        super() ;\n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n        给第一个tabs-handle选项添加on样式\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/         \n        $(\".wk-tabs .tabs-handle li\").eq(0).addClass(\"on\") ;        \n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n        载入组件逻辑\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/ \n        require([ \"../components/bigdata.min\"  ,\"../components/tabs.min\"] , (BigData)=>{\n            /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n            pv埋点\n            -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n            BigData.init(this) ;\n            BigData.bigData({\n                \"pageName\" : \"1222\" ,\n                \"pageParam\" : {                    \n                    \"store_id\" : $(\"#storeId\").val()\n                } ,\n                \"type\" : 1\n            }) ;\n            /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n            tabs实例化,onSwap的时候要将切换到的tab的拖动加载容器requestable设置为true，其他tab拖动加载容器设置为false\n            -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n            $(\".wk-tabs\").tabs({\n                \"fixedWhenScroll\" : false ,\n                \"effect\" : \"fadeIn\" ,\n                \"duration\" : 200 ,\n                 \"onSwap\" : (index)=> {\n                    $(\".tabs-frame .list-container\").attr( \"data-requestable\" , \"false\" ) ;\n                    $(\".tabs-frame\").eq(index).find(\".list-container\").attr( \"data-requestable\" , \"true\" ) ;\n                }\n            }) ;\n        }) ;\n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n        给dom节点绑定事件\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n        this.addEventListener() ;\n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n        上拉加载实例化\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n        this.pullload() ;\n    }\n    /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n    给dom节点绑定事件\n    -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n    addEventListener() {\n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n        页面滚动的时候banner条的变动\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n        $(window).on(\"scroll\" , ()=> {\n            let $header = $(\"header\") ;\n            let $storeName = $(\"header .banner .store-name\") ;\n            if ($(window).scrollTop() >= 20 ) {                \n                if( ! $header.hasClass(\"fixed\")) $header.addClass(\"fixed\") ;\n                $(\".tabs-frame\").addClass(\"header-margin\") ;           \n                $storeName.hide() ;\n            }\n            else if ($(window).scrollTop() < 20) {\n                if( $header.hasClass(\"fixed\") ) $header.removeClass(\"fixed\") ;\n                $(\".tabs-frame\").removeClass(\"header-margin\") ; \n                $storeName.show() ;\n            }\n        }) ; \n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n        添加微信按钮事件绑定\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n        $(\".tabs-frame.agent-items .wechat\").click(function(){\n            $.modal({\n                \"id\" : \"addWechatModal\" ,\n                \"title\" : \"扫码加微信\" ,\n                \"content\" : \"<img src=\\\"\" + $(this).data(\"agentwchartqrimgurl\") + \"\\\" style=\\\"width : 12rem ; height : 12rem ; \\\"><p>微信号：\" + $(this).data(\"agentwchatid\") + \"</p>\" ,\n                \"buttons\" : [\n                    { \"text\" : \"确定\"  , \"clickCallback\" : function(){ $.modal.close(\"addWechatModal\") ; } }               \n                ]\n            }) ;\n        }) ;       \n    } ;\n    /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n    绘制单条房源dom节点的方法，请参照ejs模板内容\n    -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n    createEsf(esf) {\n        let aNode = $(document.createElement(\"A\")).attr( \"href\" , esf.url ).attr( \"data-bigdata\" , esf.bigDataParams).addClass(\"esf-item\") ;\n        let dlNode = $(document.createElement(\"DL\")) ;\n        dlNode.append( \"<dt><img src=\\\"\" + esf.houseImgUrl + \"?x-oss-process=image/resize,w_150\\\" alt=\\\"\" + esf.estateName + \"\\\" class=\\\"lazy\\\"></dt>\" ) ;\n        dlNode.append( \"<dd class=\\\"title\\\">\" + esf.houseTitle + \"</dd>\" ) ;\n        dlNode.append( \"<dd><span class=\\\"layout\\\">\" + esf.houseChild +\" \" + esf.areaStr + \"</span><span class=\\\"money\\\">\" + esf.totalPrice + \" 万</span></dd>\" ) ;\n        dlNode.append( \"<dd><span class=\\\"location\\\">\" +  esf.district + \" \" + esf.town + \"</span><span class=\\\"price\\\">\" + esf.unitPrice  +\" 元/㎡</span></dd>\" ) ;\n        let tagNode = $(document.createElement(\"DD\")) ;\n        if(esf.isTopHouse >1) tagNode.append( \"<span class=\\\"selected\\\">精选</span>\" ) ;\n        else if(esf.isStorePush === 1) tagNode.append( \"<span>店长推荐</span>\" ) ;\n        else if(esf.commAgent > 0) tagNode.append( \"<span>急售</span>\" ) ;\n        if(esf.fullYears >= 5 && esf.onlyOne == 1)  tagNode.append( \"<span>满五唯一</span>\" ) ;\n        if(esf.fullYears >= 2) tagNode.append( \"<span>满二</span>\" ) ;\n        if(esf.isSubwayHouse === 1)  tagNode.append( \"<span>地铁</span>\" ) ;\n        if(esf.isSchoolHouse === 1) tagNode.append( \"<span>近学校</span>\" ) ;\n        if(esf.isNewOnStore === 1) tagNode.append( \"<span>新上</span>\" ) ;\n        if(esf.orientation === 9) tagNode.append( \"<span>南北通透</span>\" ) ;\n        dlNode.append(tagNode) ;\n        aNode.append(dlNode) ;\n        return aNode ;\n    } ;    \n    /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n    上拉加载实例化\n    -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n    pullload() {\n        let self = this ;\n        //二手房\n        $(\".tabs-frame.esf-items .list-container\").pullload({\n            apiUrl : this.apiUrl.store.house ,\n            queryStringObject : { \"storeId\" : $(\"#storeId\").val() } ,          \n            callback : function(data) {\n                if( ! data.data) return ;          \n                $.each(data.data , (index , esf)=> {\n                    $(\".tabs-frame.esf-items .list-container\").append(self.createEsf(esf)) ;\n                }) ;\n            }\n        }) ;\n       \n    } ;\n}\n/*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n类的初始化\n-----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n$(document).ready(function() {\n    new IndexController ;\n}) ;"]}