"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,i,a){return i&&e(t.prototype,i),a&&e(t,a),t}}(),ListController=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));$(".lazy").lazyload({placeholder:e.staticDomain+"/wkh5_fe/images/common/loading.jpg"}),new Location({businessType:"rent",cityApiUrl:e.apiUrl.common.getCityByLatLon,identical:function(e){console.log(e)}}),e.readyFun();var i=e,a=43;localStorage.cookieId=$.cookie("cookieId"),a=$.cookie("cityId")?$.cookie("cityId"):43;var s=location.href.slice(0,location.href.lastIndexOf("/")+1),o=location.href.slice(location.href.lastIndexOf("/")+1,location.href.length),l="",c="",n="",r="",d="la-0",h="";if(""==o&&(s=s),o.indexOf("?")<0)l=o;else{l=o.slice(0,o.indexOf("?"))," "==l&&(l=d),n=o.slice(o.indexOf("?"));var u=e.GetRequest();u.districtId?delete u.districtId:u.townId?delete u.townId:u.subwayLine?delete u.subwayLine:u.subwayStation?delete u.subwayStation:u.subEstateId&&delete u.subEstateId,u&&(r="?"+$.param(u))}var p="";e.GetRequest().channel&&(p=e.GetRequest().channel);var f=e.parseCondition({condition:l});if(e.choseFun(f,s,h),e.request(e.apiUrl.rent.list.cityAreas,{houseType:3,cityId:a},{successCallback:function(e){if(1==e.status){var t=e,a=t.data,o="",l="",c="",n="";f.di?($(".dic-content").show(),o="<li>不限</li>",a.forEach(function(e){e.id==f.di?(o+='<li class="areas-subway" data-id ="'+e.id+'" data-di="di-'+e.id+'">'+e.name+"</li>",f.to?(l="<li>不限</li>",e.townList.forEach(function(e){e.id==f.to?(l+='<li class="chosed" data-id ="'+e.id+'" data-to="to-'+e.id+'">'+e.name+"</li>",$("#dic>p").html(e.name)):l+='<li  data-id ="'+e.id+'" data-to="to-'+e.id+'">'+e.name+"</li>"})):(l="<li class='chosed'>不限</li>",e.townList.forEach(function(e){l+='<li  data-id ="'+e.id+'" data-to="to-'+e.id+'">'+e.name+"</li>"}),c=e.name,$("#dic>p").html(e.name)),n="di-"+e.id):o+='<li data-id ="'+e.id+'" data-di="di-'+e.id+'">'+e.name+"</li>"}),$("#dic").find("i").addClass("bacchosed"),$("#dic").addClass("chosed")):(o="<li class='areas-subway'>不限</li>",a.forEach(function(e){o+='<li data-id ="'+e.id+'" data-di="di-'+e.id+'">'+e.name+"</li>"})),$("#dicAreas").append(o),$("#town").append(l),$("#dicAreas>li").click(function(){var e=$(this).attr("data-id");if(n=$(this).attr("data-di"),c=$(this).html(),$(this).siblings().removeClass("areas-subway"),$(this).addClass("areas-subway"),"不限"==c){$("#dic>p").html("区域"),$(".bac").hide(),$("#dic").children("span").removeClass("direction"),$("#dic").find("i").removeClass("bacchosed"),$("#dic").removeClass("active-color-top"),$("#dic").removeClass("chosed"),$(".dic").slideToggle(),delete f.di,delete f.to,delete f.li,delete f.st;var t=i.objectToString(f);window.location.href=s+t+r}else a.forEach(function(t){f.di&&f.di==t.id&&e==t.id?f.to?(l="<li>不限</li>",t.townList.forEach(function(e){l+=f.to==e.id?'<li class="chosed" data-id ="'+e.id+'" data-to="to-'+e.id+'">'+e.name+"</li>":'<li data-id ="'+e.id+'" data-to="to-'+e.id+'">'+e.name+"</li>"}),$("#town").empty(),$("#town").append(l)):(l="<li class='chosed'>不限</li>",t.townList.forEach(function(e){l+='<li data-id ="'+e.id+'" data-to="to-'+e.id+'">'+e.name+"</li>"}),$("#town").empty(),$("#town").append(l)):e==t.id&&t.townList&&(l="<li>不限</li>",t.townList.forEach(function(e){l+='<li data-id ="'+e.id+'" data-to="to-'+e.id+'">'+e.name+"</li>"}),$("#town").empty(),$("#town").append(l))}),$("#town >li").click(function(){$(this).siblings().removeClass("chosed"),$(this).addClass("chosed");var e=($(this).attr("data-id"),$(this).attr("data-to")),t=$(this).html();if(delete f.li,delete f.st,"不限"==t){$("#dic > p").html(c);var a=i.parseCondition({condition:n});$.extend(f,a),delete f.to;var o=i.objectToString(f);window.location.href=s+o+r}else{$("#dic > p").html(t);var l=n+"-"+e,d=i.parseCondition({condition:l});$.extend(f,d);var h=i.objectToString(f);console.log(h),window.location.href=s+h+r}$(".bac").hide(),$("#dic").children("span").removeClass("direction"),$("#dic").find("i").addClass("bacchosed"),$("#dic").addClass("chosed"),$(".dic").slideToggle()})}),$("#town >li").click(function(){$(this).siblings().removeClass("chosed"),$(this).addClass("chosed");var e=($(this).attr("data-id"),$(this).attr("data-to")),t=$(this).html();if(delete f.li,delete f.st,"不限"==t){$("#dic > p").html(c);var a=i.parseCondition({condition:n});$.extend(f,a),delete f.to;var o=i.objectToString(f);console.log(o),window.location.href=s+o+r}else{$("#dic > p").html(t);var l=n+"-"+e,d=i.parseCondition({condition:l});$.extend(f,d);var h=i.objectToString(f);console.log(h),window.location.href=s+h+r}$(".bac").hide(),$("#dic").children("span").removeClass("direction"),$("#dic").find("i").addClass("bacchosed"),$("#dic").addClass("chosed"),$(".dic").slideToggle()})}}}),e.request(e.apiUrl.rent.list.citySubway,{cityId:a},{successCallback:function(e){if(1==e.status&&e.data.length){var t=e,a=t.data,o="",l="",c="",n="";a.forEach(function(e){f.li&&f.li==e.id?($(".dic-content").hide(),$(".metro-content").show(),$(".tabs > ul > li:eq(0)").removeClass("active-color-dic"),$(".tabs > ul > li:eq(1)").addClass("active-color-dic"),o+='<li class="areas-subway" data-id ="'+e.id+'" data-li="li-'+e.id+'">'+e.name+"</li>",f.st?(l="<li>不限</li>",e.subList.forEach(function(e){f.st==e.id?(l+="<li  class='chosed' data-id =\""+e.id+'" data-st="st-'+e.id+'">'+e.name+"</li>",$("#dic > p").html(e.name)):l+='<li data-id ="'+e.id+'" data-st="st-'+e.id+'">'+e.name+"</li>"})):(l="<li class='chosed'>不限</li>",e.subList.forEach(function(e){l+='<li data-id ="'+e.id+'" data-st="st-'+e.id+'">'+e.name+"</li>"}),c=e.name,$("#dic > p").html(e.name),n="li-"+e.id),$("#dic").find("i").addClass("bacchosed"),$("#dic").addClass("chosed")):o+='<li data-id ="'+e.id+'" data-li="li-'+e.id+'">'+e.name+"</li>"}),$("#metroStation").append(l),$("#metroLine").append(o),$("#metroLine > li").click(function(){var e=$(this).attr("data-id");n=$(this).attr("data-li"),c=$(this).html(),$(this).siblings().removeClass("areas-subway"),$(this).addClass("areas-subway"),a.forEach(function(t){f.li&&f.li==t.id&&e==t.id?f.st?(l="<li>不限</li>",t.subList.forEach(function(e){l+=f.st==e.id?'<li class="chosed"  data-id ="'+e.id+'" data-st="st-'+e.id+'">'+e.name+"</li>":'<li data-id ="'+e.id+'" data-st="st-'+e.id+'">'+e.name+"</li>"}),$("#metroStation").empty(),$("#metroStation").append(l)):(l="<li class='chosed'>不限</li>",t.subList.forEach(function(e){l+='<li data-id ="'+e.id+'" data-st="st-'+e.id+'">'+e.name+"</li>"}),$("#metroStation").empty(),$("#metroStation").append(l)):e==t.id&&t.subList&&(l="<li>不限</li>",t.subList.forEach(function(e){l+='<li data-id ="'+e.id+'" data-st="st-'+e.id+'">'+e.name+"</li>"}),$("#metroStation").empty(),$("#metroStation").append(l))}),$("#metroStation > li").click(function(){$(this).siblings().removeClass("chosed"),$(this).addClass("chosed");var e=($(this).attr("data-id"),$(this).attr("data-st")),t=$(this).html();if(delete f.di,delete f.to,"不限"==$(this).html()){$("#dic > p").html(c);var a=i.parseCondition({condition:n});$.extend(f,a),delete f.st;var o=i.objectToString(f);console.log(o),window.location.href=s+o+r}else{$("#dic > p").html(t);var l=n+"-"+e,d=i.parseCondition({condition:l});$.extend(f,d);var h=i.objectToString(f);console.log(h),window.location.href=s+h+r}$(".bac").hide(),$("#dic").children("span").removeClass("direction"),$("#dic").find("i").addClass("bacchosed"),$("#dic").addClass("chosed"),$(".dic").slideToggle()})}),$("#metroStation > li").click(function(){var e=($(this).attr("data-id"),$(this).attr("data-st")),t=$(this).html();if(delete f.di,delete f.to,"不限"==$(this).html()){$("#dic > p").html(c);var a=i.parseCondition({condition:n});$.extend(f,a),delete f.st;var o=i.objectToString(f);console.log(o),window.location.href=s+o+r}else{$("#dic > p").html(t);var l="li-"+f.li+"-"+e;console.log(l+"lineStationString");var d=i.parseCondition({condition:l});$.extend(f,d);var h=i.objectToString(f);console.log(h),window.location.href=s+h+r}$(".bac").hide(),$("#dic").children("span").removeClass("direction"),$("#dic").find("i").addClass("bacchosed"),$("#dic").addClass("chosed"),$(".dic").slideToggle()})}else $(".subway").hide()}}),e.firstGivePage(f,e),$(".price-list > ul >li").click(function(){if($(this).siblings().removeClass("chosed"),$(this).addClass("chosed"),$(".bac").hide(),$("#price").children("span").removeClass("direction"),delete f.cp,"不限"==$(this).html()){$("#price>p").html("租金"),$("#price").find("i").removeClass("bacchosed"),$("#price").removeClass("active-color-top"),$("#price").removeClass("chosed"),delete f.pr;var e=i.objectToString(f);console.log(e),window.location.href=s+e+n}else{$("#price>p").html($(this).html().replace(/\s|\xA0/g,"")),$("#price").find("i").addClass("bacchosed"),$("#price").addClass("active-color-top");var t=$(this).attr("data-pr"),a=i.parseCondition({condition:t});$.extend(f,a);var o=i.objectToString(f);window.location.href=s+o+n}$(".price-total").slideToggle()}),$("#selfPrConf").click(function(e){e.preventDefault();var t=$("#lowPr").val(),a=$("#topPr").val();if($(".wrong").hide(),t&&a)if(parseInt(t)>parseInt(a))$(".wrong").show(),setTimeout(function(){$(".wrong").hide()},2e3);else{$("#price>p").html(t+"-"+a),$("#price").find("i").addClass("bacchosed"),$("#price").addClass("active-color-top"),delete f.pr;var o={cp:t+"to"+a};$.extend(f,o);var l=i.objectToString(f);console.log(l),window.location.href=s+l+n,$(".bac").hide(),$("#price").children("span").removeClass("direction"),$(".price-total").slideToggle()}else{if(""==t&&a){$("#price>p").html(a+"以下"),$("#price").find("i").addClass("bacchosed"),$("#price").addClass("active-color-top"),delete f.pr;var c={cp:"0to"+a};$.extend(f,c);var r=i.objectToString(f);console.log(r),window.location=s+r+n}else if(""==a&&t){$("#price>p").html(t+"以上"),$("#price").find("i").addClass("bacchosed"),$("#price").addClass("active-color-top"),delete f.pr;var d={cp:t+"to0"};$.extend(f,d);var h=i.objectToString(f);console.log(h),window.location.href=s+h+n}else{$("#price>p").html("租金"),$("#price").find("i").removeClass("bacchosed"),$("#price").removeClass("active-color-top"),$("#price").removeClass("chosed"),delete f.pr,delete f.cp;var u=i.objectToString(f);console.log(u),window.location.href=s+u+n}$(".bac").hide(),$("#price").children("span").removeClass("direction"),$(".price-total").slideToggle()}}),$("#houseCmfir").click(function(){var e=$(".house-list  > ul > li "),t="",a=[],o=[];if(e.each(function(e,t){1==t.classList.length?a.push(e):o.push(e)}),a.length>0){if(a.forEach(function(e,i){t=0==i?$(".house-list  > ul > li:eq("+e+")").attr("data-la"):t+"-"+$(".house-list  > ul > li:eq("+e+")").attr("data-la")}),1==a.length)if("不限"==$(".house-list  > ul > li:eq("+a[0]+")").html())$("#type >p").html("户型");else{var l=$(".house-list  > ul > li:eq("+a[0]+")").html();$("#type >p").html(l),$("#type").find("i").addClass("bacchosed")}else $("#type >p").html("多选"),$("#type").find("i").addClass("bacchosed");var c=i.parseCondition({condition:t});$.extend(f,c);var r=i.objectToString(f);console.log(r),console.log(s+r),window.location.href=s+r+n}5==o.length&&0==a[0]&&($("#type").find("i").removeClass("bacchosed"),$("#type").removeClass("active-color-top"),$("#type").removeClass("chosed")),$(".bac").hide(),$("#type").children("span").removeClass("direction"),$(".house-type").slideToggle()}),$("#moreComf").click(function(){var e=$(".more-spec > ul >li"),t=$(".area > ul >li"),a=$(".decoration > ul >li"),o="",l="",c="",r=[],d={},h={},u={},p={},v=[];e.each(function(e,t){1==t.classList.length?0==e?o="ta-1":o+="-ta-1":0==e?o="ta-0":o+="-ta-0"}),t.each(function(e,t){1==t.classList.length&&v.push(e)}),v&&(v.length>1?v.forEach(function(e,t){l=0==t?$(".area > ul >li:eq("+e+")").attr("data-ar"):l+"-"+$(".area > ul >li:eq("+e+")").attr("data-ar")}):l=$(".area > ul >li:eq("+v[0]+")").attr("data-ar")),a.each(function(e,t){1==t.classList.length&&r.push(e)}),r.length>1?r.forEach(function(e,t){c=0==t?$(".decoration > ul >li:eq("+e+")").attr("data-dt"):c+"-"+$(".decoration > ul >li:eq("+e+")").attr("data-dt")}):c=$(".decoration > ul >li:eq("+r[0]+")").attr("data-dt"),o?h=i.parseCondition({condition:o}):delete f.ta,l?u=i.parseCondition({condition:l}):delete f.ar,c?p=i.parseCondition({condition:c}):delete f.dt,console.log(o+"tagString"),$.extend(d,h,u,p),u.ar||p.dt||h.ta?($("#more").find("i").addClass("bacchosed"),$("#more").removeClass("active-color-top"),$("#more").addClass("chosed")):($("#more").find("i").removeClass("bacchosed"),$("#more").removeClass("active-color-top"),$("#more").removeClass("chosed")),$(".bac").hide(),$("#more").children("span").removeClass("direction"),$(".more").slideToggle(),$.extend(f,h,u,p);var m=i.objectToString(f);console.log(s+m),window.location.href=s+m+n}),f.so){var v=$(".sort-chose>ul>li"),m=i.objectToString({so:f.so});v.each(function(e,t){m==$(".sort-chose>ul>li:eq("+e+")").attr("data-so")&&($(".sort-chose>ul>li:eq("+e+")").siblings().removeClass("chosed"),$(".sort-chose>ul>li:eq("+e+")").addClass("chosed"))}),"so-0"!=m?$(".sort").addClass("sort-change"):$(".sort").removeClass("sort-change")}if($(".sort-chose>ul>li").click(function(){$(".bac").css({"z-index":"10",top:"4.5rem"}),$(".bac").hide(),$(this).siblings().removeClass("chosed"),$(this).addClass("chosed"),$(".sort-chose").slideToggle();var e=$(this).attr("data-so"),t=i.parseCondition({condition:e});console.log(t),$.extend(f,t);var a=i.objectToString(f);console.log(a),window.location.href=s+a+n}),$("#searchInput").on("keyup input",function(e){if($(this).val()){$(".conone").show(),$(".have-result").hide();var t=[],o={key:$(this).val(),cityId:a,pageName:"renthouselist"},l=encodeURIComponent(JSON.stringify({eventName:"1203004",channel:p||"",type:2}));if(i.request(i.apiUrl.rent.list.acWord,o,{successCallback:function(e){var a=e.data;if(h=a.secondHouseList,a.secondHouseList){$(".show-result").show(),$(".no-result").hide(),$(".search-result").show();var o="",n="",r="";a.secondHouseList.forEach(function(e,t){o=e.estateDesc.replace(e.markname,"<span>"+e.markname+"</span>"),n=e.address.replace(e.markname,"<span>"+e.markname+"</span>"),0==t?r='<li data-bigdata="'+l+' " data-type="'+e.type+'" data-value="'+e.value+'" data-name="'+e.estateDesc+'" data-address="'+e.address+'"><p>'+o+"</p><span>"+n+"</span></li>":r+='<li data-bigdata="'+l+' " data-type="'+e.type+'" data-value="'+e.value+'" data-name="'+e.estateDesc+'" data-address="'+e.address+'"><p>'+o+"</p><span>"+n+"</span></li>"}),$("#showResult").empty(),$("#showResult").append(r),$("body").css("background-color","#F0F0F0")}else $(".no-result").show(),$(".show-result").hide(),$("body").css("background-color","#FFF");$("#showResult >li").click(function(){t=JSON.parse(localStorage.getItem("searchHistory"))?JSON.parse(localStorage.getItem("searchHistory")):[];var e={key:$(this).attr("data-name"),id:$(this).attr("data-value"),address:$(this).attr("data-address"),type:$(this).attr("data-type")};t.length>4&&t.reverse().splice(4);var a=t.reverse();a.push(e),localStorage.setItem("searchHistory",JSON.stringify(a)),delete f.di,delete f.to,delete f.li,delete f.st;var o=i.objectToString(f);c=$(this).attr("data-value");var l=$(this).attr("data-type");window.location.href=s+o+i.checkType(l,c)})}}),h&&13==e.keyCode){t=JSON.parse(localStorage.getItem("searchHistory"))?JSON.parse(localStorage.getItem("searchHistory")):[];var n={key:$("#showResult>li:eq(0)").attr("data-name"),id:$("#showResult>li:eq(0)").attr("data-value"),address:$("#showResult>li:eq(0)").attr("data-address"),type:$("#showResult>li:eq(0)").attr("data-type")};t.length>4&&t.reverse().splice(4);var r=t.reverse();r.push(n),localStorage.setItem("searchHistory",JSON.stringify(r)),delete f.di,delete f.to,delete f.li,delete f.st;var d=i.objectToString(f);c=$("#showResult>li:eq(0)").attr("data-value");var u=$("#showResult>li:eq(0)").attr("data-type");i.checkType(u,c),window.location.href=s+d+i.checkType(u,c)}}}),$(".contwo").click(function(){$("#searchInput").val(""),$(".icon-close").hide(),$("#showResult").empty(),$(".no-result").hide(),$(".have-result").hide();var e=i.objectToString(f);window.location.href=s+e+r}),$(".conone").click(function(){$("#searchInput").val(""),$(".icon-close").hide(),$("#showResult").empty(),$(".no-result").hide(),JSON.parse(localStorage.getItem("searchHistory"))?($(".have-result").show(),$("body").css("background-color","#F0F0F0")):($(".have-result").hide(),$("body").css("background-color","#FFF"))}),JSON.parse(localStorage.getItem("searchHistory"))&&e.haveNot()){var g=JSON.parse(localStorage.getItem("searchHistory")).reverse()[0].key;$("#searchInput").val(g),$(".contwo").show()}$(".clearOption").click(function(){i.objectToString(f);window.location.href=s+d+r});var b={};if(l){var w=l,y=w.replace("to","townId").replace("li","subwayLine").replace("st","subwayStation"),C=i.parseCondition({condition:y}),S=["0-50","50-70","70-90","90-110","110-130","130-150","150-0"];if(b={cityId:a,bedRoomSumLists:[],renovations:[],spaceAreas:[]},C.la&&1==C.la.length?0==C.la?b.bedRoomSumLists=[]:b.bedRoomSumLists.push(C.la):b.bedRoomSumLists=C.la,delete C.la,C.pr&&(C.pr.constructor==Array?(b.rentPriceStart=C.pr[0],b.rentPriceEnd=C.pr[1]):b.rentPriceStart=C.pr),delete C.pr,C.cp){var k=C.cp.split("townId");b.rentPriceStart=k[0],b.rentPriceEnd=k[1]}delete C.cp,C.ta&&(b.isSubWay=C.ta[0],b.priceDown=C.ta[1],b.isNewOnStore=C.ta[2],b.orientation=C.ta[3]),delete C.ta,C.ar&&(1==C.ar.length?b.spaceAreas.push(S[C.ar]):C.ar.forEach(function(e){b.spaceAreas.push(S[e])})),delete C.ar,C.dt&&(1==C.dt.length?b.renovations.push(C.dt):b.renovations=C.dt),delete C.dt,C.so&&(b.orderType=C.so),delete C.so,C.di&&(b.districtId=C.di),delete C.di,e.GetRequest().districtId?b.districtId=e.GetRequest().districtId:e.GetRequest().townId?b.townId=e.GetRequest().townId:e.GetRequest().subwayLine?b.subwayLine=e.GetRequest().subwayLine:e.GetRequest().subwayStation?b.subwayStation=e.GetRequest().subwayStation:e.GetRequest().subEstateId&&(b.subEstateId=e.GetRequest().subEstateId),$.extend(b,C)}else b={cityId:a},e.GetRequest().districtId?b.districtId=e.GetRequest().districtId:e.GetRequest().townId?b.townId=e.GetRequest().townId:e.GetRequest().subwayLine?b.subwayLine=e.GetRequest().subwayLine:e.GetRequest().subwayStation?b.subwayStation=e.GetRequest().subwayStation:e.GetRequest().subEstateId&&(b.subEstateId=e.GetRequest().subEstateId);return e.pullload(b),e.GetRequest().channel?($(".rent-list").css({"box-shadow":" 0 0 0 0 rgba(0,0,0,.15)","background-color":"#fff"}),$(".search-input").css("width","96%"),$(".history-name").hide(),$(".icon-fanhui").hide(),$(".sort").hide(),$("#searchInput").val()?$(".conone").show():$(".conone").hide(),$(".cancel-channel").click(function(){$(this).hide(),$(".contwo").hide(),$(".conone").hide(),$(".all-control").removeClass("on-hide"),$(".search-result").hide(),$(".no-result").hide(),$(".back").hide(),$(".show-result").hide(),$("#searchInput").val(""),$(".location-all").show(),$("#searchInput").css({"background-color":"#F8F8F8",width:"52%"}),$(".rent-search").siblings("ul").removeClass("on-hide"),$(".rent-search").removeClass("active-search-channel"),$("body").css("background-color","#F0F0F0")}),$(".location-all").click(function(){$.cookie("citySelectionOpen",1,{path:"/"})})):($(".input-kw-form").css({"background-color":"#FFF"}),$(".location-all").hide(),$(".sort").show(),$(".icon-hanbao").show()),$(".input-kw-form").submit(function(e){e.preventDefault()}),$("#searchInput").click(function(){if($(".rent-search").siblings("ul").addClass("on-hide"),$(".all-control").addClass("on-hide"),$(".search-result").show(),$(".show-result").hide(),$(".icon-hanbao").hide(),$("#searchInput").val()?$(".conone").show():$(".conone").hide(),"jrttsub"==i.GetRequest().channel?($(".rent-search").addClass("active-search-channel"),$(".cancel-channel").show(),$(".location-all").hide(),$("#searchInput").css({"background-color":"#F8F8F8",width:"100%"})):($(".input-kw-form").css({"background-color":"#f0f0f0"}),$(".rent-search").addClass("active-search"),$(".back").hide(),$(".fanhui").show(),$(".contwo").hide()),JSON.parse(localStorage.getItem("searchHistory"))&&!h){$("body").css("background-color","#F0F0F0"),$(".have-result").show();var e=JSON.parse(localStorage.getItem("searchHistory")).reverse(),t="",a=encodeURIComponent(JSON.stringify({eventName:"1203005",channel:p||"",type:2}));e.forEach(function(e,i){0==i?t='<li data-bigdata="'+a+' " data-type="'+e.type+'" data-value="'+e.id+'" data-name="'+e.key+'" data-address="'+e.address+'"><p>'+e.key+"</p><span>"+e.address+"</span></li>":t+='<li data-bigdata="'+a+' " data-type="'+e.type+'" data-value="'+e.id+'" data-name="'+e.key+'" data-address="'+e.address+'"><p>'+e.key+"</p><span>"+e.address+"</span></li>"}),$("#resultHistory").empty(),$("#resultHistory").append(t),$("#resultHistory >li").click(function(){var e=[];e=JSON.parse(localStorage.getItem("searchHistory"))?JSON.parse(localStorage.getItem("searchHistory")):[];var t=($(this).index(),{key:$(this).attr("data-name"),id:$(this).attr("data-value"),address:$(this).attr("data-address"),type:$(this).attr("data-type")});e.forEach(function(i,a){i.id==t.id&&e.splice(a,1)}),e.push(t),localStorage.setItem("searchHistory",JSON.stringify(e)),delete f.di,delete f.to,delete f.li,delete f.st;var a=i.objectToString(f),o=$(this).attr("data-value"),l=$(this).attr("data-type");window.location.href=s+a+i.checkType(l,o)})}else $(".show-result").show(),$(".have-result").hide(),$("body").css("background-color","#FFF")}),$(".icon-hanbao").click(function(){$(".bac").css({"z-index":"16",top:"0"}),$(".bac").show(),$(".slide-right").show(),$(".slide-right").animate({right:"0"})}),require(["../components/bigdata.min"],function(e){e.init(i),e.bigData({pageName:"1202",channel:p||"",type:1})}),$(".writ-price").click(function(e){e.stopPropagation()}),$(".price-list > ul").scroll(function(e){e.stopPropagation()}),e}return _inherits(t,e),_createClass(t,[{key:"readyFun",value:function(){setTimeout(function(){$(".total-num").hide(),$(".all-control").css("margin-top","8.5rem")},1500),$(".content-hight").height(.7*$(window).height()-$(".tabs").height())}},{key:"choseFun",value:function(e,t,i){var a=this;$(".rent-list > ul > li").click(function(){$(this).siblings().removeClass("active-color-top"),$(this).toggleClass("active-color-top");var t=$(".rent-list > ul > li > span >i");t.each(function(e,t){1==t.classList.length?$(".rent-list > ul > li:eq("+e+")").addClass("chosed"):$(".rent-list > ul > li:eq("+e+")").removeClass("chosed")}),$(this).siblings().children("span").removeClass("direction"),$(this).children("span").toggleClass("direction");var i=$(".rent-list > ul > li > span");$(".bac").hide(),"jrttsub"==a.GetRequest().channel?$("#sort").hide():$("#sort").show(),i.each(function(e,t){1==t.classList.length&&($(".bac").show(),$("#sort").hide())});var s=$(this).index();0==s?($(".dic").stop(),$(".price-total").hide(),$(".house-type").hide(),$(".more").hide(),$(".dic").slideToggle("fast")):1==s?($(".bac").stop(),$(".dic").hide(),$(".house-type").hide(),$(".more").hide(),$(".price-total").slideToggle("fast")):2==s?($(".bac").stop(),$(".dic").hide(),$(".price-total").hide(),$(".more").hide(),$(".house-type").slideToggle("fast")):3==s&&($(".bac").stop(),$(".dic").hide(),$(".price-total").hide(),$(".house-type").slideUp(),$(".more").slideToggle("fast")),$(".sort-chose").hide(),$(".bac").css({"z-index":"10",top:"4.5rem"}),a.firstGivePage(e,a)}),$(".tabs > ul > li").click(function(){$(this).siblings().removeClass("active-color-dic"),$(this).addClass("active-color-dic");var e=$(this).index();0==e?($(".metro-content").hide(),$(".dic-content").slideDown()):1==e&&($(".dic-content").hide(),$(".metro-content").slideDown())}),$(".more-spec > ul >li").click(function(){$(this).toggleClass("active-house")}),$(".area > ul >li").click(function(){$(this).toggleClass("active-house")}),$(".decoration > ul >li").click(function(){$(this).toggleClass("active-house")}),$(".house-list > ul > li").click(function(){var e=$(this).index();if(0==e)$(this).siblings().removeClass("active-house"),$(this).addClass("active-house");else{$(this).toggleClass("active-house");var t=$(".house-list > ul > li"),i=[];t.each(function(e,t){1==t.classList.length?0==e&&$(".house-list > ul > li:eq(0)").removeClass("active-house"):i.push(e)}),i.length>5&&$(".house-list > ul > li:eq(0)").addClass("active-house")}}),$("#sort").click(function(){$(".bac").css({"z-index":"13",top:"0"}),$(".bac").show(),$(".sort-chose").slideToggle()}),$(".bac").click(function(){$(".dic").slideUp(),$(".price-total").slideUp(),$(".house-type").slideUp(),$(".more").slideUp(),$(".rent-list > ul > li").children("span").removeClass("direction"),$(".rent-list > ul > li").removeClass("active-color-top"),$(".bac").css({"z-index":"10",top:"4.5rem"}),$(".bac").hide(),$(".slide-right").animate({right:"-50%"}),$(".slide-right").hide(),"jrttsub"==a.GetRequest().channel?$("#sort").hide():$("#sort").show(),$(".sort-chose").hide()}),$(".fanhui").click(function(){$(".input-kw-form").css({"background-color":"#fff"}),$(".rent-search").removeClass("active-search"),$(".all-control").removeClass("on-hide"),$(".rent-search").siblings("ul").removeClass("on-hide"),$(".search-result").hide(),$(".no-result").hide(),$(".back").show(),$(".icon-hanbao").show(),$(this).hide(),$(".contwo").hide(),$(".show-result").hide(),$("#searchInput").val(""),$(".conone").hide()}),$(".back").click(function(){window.location.href="/"}),$("#clearHistory").click(function(){localStorage.removeItem("searchHistory"),$(".have-result").hide()}),$("#cancelMore").click(function(){$(".more-spec > ul >li").removeClass("active-house"),$(".area > ul >li").removeClass("active-house"),$(".decoration > ul >li").removeClass("active-house")})}},{key:"firstGivePage",value:function(e,t){if(e.la){var i=($(".house-list>ul>li"),[0,1,2,3,4,5]);e.la.length>1?(e.la.forEach(function(e){$(".house-list>ul>li:eq("+e+")").addClass("active-house"),i.forEach(function(t,a){e==t&&i.splice(a,1)})}),i.forEach(function(e){$(".house-list>ul>li:eq("+e+")").removeClass("active-house")}),$("#type >p").html("多选"),$("#type").find("i").addClass("bacchosed"),$("#type").addClass("chosed")):(console.log(e.la),0==e.la?($("#type >p").html("户型"),$("#type").find("i").removeClass("bacchosed"),$("#type").removeClass("chosed")):($("#type >p").html($(".house-list>ul>li:eq("+e.la+")").html()),$("#type").find("i").addClass("bacchosed"),$("#type").addClass("chosed")),$(".house-list>ul>li:eq("+e.la+")").addClass("active-house"),$(".house-list>ul>li:eq("+e.la+")").siblings().removeClass("active-house"))}else $(".house-list>ul>li:eq(0)").addClass("active-house"),$(".house-list>ul>li:eq(0)").siblings().removeClass("active-house");if(e.pr){var a=$(".price-list>ul>li"),s=t.objectToString({pr:e.pr});a.each(function(e,t){s==$(".price-list>ul>li:eq("+e+")").attr("data-pr")&&($(".price-list>ul>li:eq("+e+")").addClass("chosed"),$("#price>p").html($(".price-list>ul>li:eq("+e+")").html().replace(" - ","-")),$("#price").find("i").addClass("bacchosed"),$("#price").addClass("chosed"))})}else if(e.cp){var o=e.cp.split("to");0!=o[0]&&0!=o[1]?($("#lowPr").val(o[0]),$("#topPr").val(o[1]),$("#price>p").html(o[0]+"-"+o[1])):0==o[0]&&0!=o[1]?($("#topPr").val(o[1]),$("#price>p").html(o[1]+"以下")):0!=o[0]&&0==o[1]&&($("#lowPr").val(o[0]),$("#price>p").html(o[0]+"以上")),$("#price").find("i").addClass("bacchosed"),$("#price").addClass("chosed")}else $(".price-list>ul>li:eq(0)").addClass("chosed");var l="ta-0-ta-0-ta-0-ta-0";if(e.ta&&(l=t.objectToString({ta:e.ta})),"ta-0-ta-0-ta-0-ta-0"!=l||e.ar||e.dt?($("#more").find("i").addClass("bacchosed"),$("#more").addClass("chosed")):($("#more").find("i").removeClass("bacchosed"),$("#more").removeClass("chosed")),e.ta?e.ta.forEach(function(e,t){1==e?$(".more-spec > ul >li:eq("+t+")").addClass("active-house"):$(".more-spec > ul >li:eq("+t+")").removeClass("active-house")}):$(".more-spec > ul >li").removeClass("active-house"),e.ar){var c=[0,1,2,3,4,5,6];e.ar.length>1?e.ar.forEach(function(e,t){$(".area>ul>li:eq("+e+")").addClass("active-house"),c.forEach(function(t,i){e==t&&c.splice(i,1)})}):($(".area>ul>li:eq("+e.ar+")").addClass("active-house"),c.forEach(function(t,i){e.ar==t&&c.splice(i,1)})),c.forEach(function(e){$(".area>ul>li:eq("+e+")").removeClass("active-house")})}else $(".area>ul>li").removeClass("active-house");if(e.dt){var n=[1,2,3,4,5];e.dt.length>1?e.dt.forEach(function(e,t){$(".decoration> ul >li:eq("+(e-1)+")").addClass("active-house"),n.forEach(function(t,i){e==t&&n.splice(i,1)})}):($(".decoration> ul >li:eq("+(e.dt-1)+")").addClass("active-house"),n.forEach(function(t,i){e.dt==t&&n.splice(i,1)})),n.forEach(function(e){$(".decoration> ul >li:eq("+(e-1)+")").removeClass("active-house")})}else $(".decoration> ul >li").removeClass("active-house")}},{key:"parseCondition",value:function(e){var t=e.condition,i=e.separator,a=void 0===i?"-":i,s={};if(!t)return s;var o=t.split(a);return 1===o.length?o[0]:(o.forEach(function(e,t){var i=o.length<t+2?"":o[t+1];t%2==0&&(s.hasOwnProperty(e)?(s[e].constructor!=Array&&(s[e]=[s[e]]),s[e].push(i)):s[e]=i)}),s)}},{key:"objectToString",value:function(e){var t=[],i=[];for(var a in e)t.push(a),i.push(e[a]);var s="";return t.forEach(function(e,t){0==t?i[t].constructor==Array?i[t].forEach(function(t,i){s=0==i?e+"-"+t:s+"-"+e+"-"+t}):s=e+"-"+i[t]:i[t].constructor==Array?i[t].forEach(function(t,i){s=s+"-"+e+"-"+t}):s=s+"-"+e+"-"+i[t]}),s}},{key:"creatRent",value:function(e){var t=[];e.houseTag.isSubwayHouse&&t.push("近地铁"),e.houseTag.isPriceDown&&t.push("降价"),e.houseTag.isNewHouse&&t.push("新上"),1==e.houseTag.isHardcover&&t.push("精装"),2==e.houseTag.isHardcover&&t.push("豪装"),e.houseTag.isSouth&&t.push("朝南");var i="";t&&t.forEach(function(e,t){0==t?i='<span class="tag">'+e+"</span>":i+='<span class="tag">'+e+"</span>"});var a='<a  class="rent-item box" href=" '+e.url+'">\n            <div class="left">\n                <img src="'+e.firstImageUrl+'?x-oss-process=image/resize,w_120" alt="'+e.estateName+' " class="lazy">\n            </div>\n            <div class="right">\n                <h4> '+e.houseTitle+'</h4>\n                <p class="base-info">                    \n                   '+e.houseTypeStr+" "+e.spaceArea+"㎡ | "+e.districtAndTownName+'\n                </p>\n                <p class="tags">'+i+'</p>\n                <p class="unit-price"> '+e.rentPriceStr+" 元/月</p>\n            </div>\n        </a>";return a}},{key:"pullload",value:function(e){console.log("conditionObject"+JSON.stringify(e));var t=this;$(".rent-items").pullload({apiUrl:this.apiUrl.rent.list.rentHouseList,requestType:"post",queryStringObject:e,traditional:!0,pageSize:10,threshold:50,callback:function(e){e.data&&$.each(e.data,function(e,i){i.url="/shanghai/rent/"+i.encryptHouseId+".html",$(".rent-items").append(t.creatRent(i))})}})}},{key:"checkType",value:function(e,t){var i="";return 1==e?i="?districtId="+t:2==e?i="?townId="+t:3==e?i="?subwayLine="+t:4==e?i="?subwayStation="+t:5==e&&(i="?subEstateId="+t),this.GetRequest().channel&&i?i=i+"&channel"+this.GetRequest().channel:this.GetRequest().channel&&!i?i="?channel"+this.GetRequest().channel:!this.GetRequest().channel&&i&&(i=i),i}},{key:"GetRequest",value:function(){var e=location.search,t={};
if(e.indexOf("?")!==-1)for(var i=e.substr(1),a=i.split("&"),s=0;s<a.length;s++)t[a[s].split("=")[0]]=a[s].split("=")[1];return t}},{key:"haveNot",value:function(){return!!(this.GetRequest().districtId||this.GetRequest().townId||this.GetRequest().subwayLine||this.GetRequest().subwayStation||this.GetRequest().subEstateId)}}]),t}(Controller);$(document).ready(function(){new ListController});
//# sourceMappingURL=list.min.js.map
