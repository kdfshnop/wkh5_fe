"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,i,a){return i&&e(t.prototype,i),a&&e(t,a),t}}(),ListController=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));$(".lazy").lazyload({placeholder:e.staticDomain+"/wkh5_fe/images/common/loading.jpg"}),$.cookie("location_latitude")&&$.cookie("location_longitude")?$(".location-name").html("附近"):$(".location-name").html("定位失败"),$.cookie("location_deniedName")&&$(".location").html($.cookie("location_deniedName")),new Location({businessType:"rent",cityApiUrl:e.apiUrl.common.getCityByLatLon,identical:function(e){},investmentFlag:function(e){e.investment?$("notopen-investment").show():$("notopen-investment").hide()}}),e.readyFun();var i=e,a=43;localStorage.cookieId=$.cookie("cookieId"),a=$.cookie("cityId")?$.cookie("cityId"):43;var s=location.href.slice(0,location.href.lastIndexOf("/")+1),o=location.href.slice(location.href.lastIndexOf("/")+1,location.href.length),l=location.pathname.slice(location.pathname.lastIndexOf("/")+1,location.pathname.length),n="",c="",d="";if(""==l?s=s:"rent"==l&&(s+="rent/",o=o.slice(o.indexOf("?"))),o.indexOf("?")<0)n=o,console.log(n+"meiyou?");else{n=o.slice(0,o.indexOf("?")),c=o.slice(o.indexOf("?"));var r=e.GetRequest();r.districtId?delete r.districtId:r.townId?delete r.townId:r.subwayLine?delete r.subwayLine:r.subwayStation?delete r.subwayStation:r.subEstateId&&delete r.subEstateId,r&&(d="?"+$.param(r))}var h=e.GetRequest().channel||"",u=e.parseCondition({condition:n});if(e.choseFun(u),e.request(e.apiUrl.rent.list.cityAreas,{houseType:3,cityId:a},{successCallback:function(e){if(1==e.status){var t=e,a=t.data,o="",l="",n="",c="";u.di?($(".dic-content").show(),o="<li>不限</li>",a.forEach(function(e){e.id==u.di?(o+='<li class="areas-subway" data-id ="'+e.id+'" data-di="di-'+e.id+'">'+e.name+"</li>",u.to?(l="<li>不限</li>",e.townList.forEach(function(e){e.id==u.to?(l+='<li class="chosed" data-id ="'+e.id+'" data-to="to-'+e.id+'">'+e.name+"</li>",$("#dic>p").html(e.name)):l+='<li  data-id ="'+e.id+'" data-to="to-'+e.id+'">'+e.name+"</li>"})):(l="<li class='chosed'>不限</li>",e.townList.forEach(function(e){l+='<li  data-id ="'+e.id+'" data-to="to-'+e.id+'">'+e.name+"</li>"}),n=e.name,$("#dic>p").html(e.name)),c="di-"+e.id):o+='<li data-id ="'+e.id+'" data-di="di-'+e.id+'">'+e.name+"</li>"}),$("#dic").find("i").addClass("bacchosed"),$("#dic").addClass("chosed")):u.ne?$(".location-name").addClass("areas-subway"):(o="<li class='areas-subway'>不限</li>",a.forEach(function(e){o+='<li data-id ="'+e.id+'" data-di="di-'+e.id+'">'+e.name+"</li>"})),$("#dicAreas").append(o),$("#town").append(l),$("#dicAreas>li").click(function(){var e=$(this).attr("data-id");if(c=$(this).attr("data-di"),n=$(this).html(),$(this).siblings().removeClass("areas-subway"),$(this).addClass("areas-subway"),"不限"==n){$("#dic>p").html("区域"),$(".bac").hide(),$("#dic").children("span").removeClass("direction"),$("#dic").find("i").removeClass("bacchosed"),$("#dic").removeClass("active-color-top"),$("#dic").removeClass("chosed"),$(".dic").slideToggle(),delete u.di,delete u.to,delete u.li,delete u.st;var t=i.objectToString(u);window.location.href=s+t+d}else if("location"==$(this).attr("data-location")){var o=["不限（智能范围)","500","1000","2000","5000"],r="";o.forEach(function(e,t){0==t?r="<li data-ne='ne-5000'>"+e+"</li>":r+='<li data-ne="ne-'+e+'">'+e+"米</li>"}),"附近"==$(this).html()&&$("#town").empty().append(r)}else a.forEach(function(t){u.di?(u.di==t.id&&e==t.id?u.to?(l="<li>不限</li>",t.townList.forEach(function(e){l+=u.to==e.id?'<li class="chosed" data-id ="'+e.id+'" data-to="to-'+e.id+'">'+e.name+"</li>":'<li data-id ="'+e.id+'" data-to="to-'+e.id+'">'+e.name+"</li>"})):(l="<li class='chosed'>不限</li>",t.townList.forEach(function(e){l+='<li data-id ="'+e.id+'" data-to="to-'+e.id+'">'+e.name+"</li>"})):e==t.id&&t.townList&&(l="<li>不限</li>",t.townList.forEach(function(e){l+='<li data-id ="'+e.id+'" data-to="to-'+e.id+'">'+e.name+"</li>"})),$("#town").empty().append(l)):e==t.id&&t.townList&&(l="<li>不限</li>",t.townList.forEach(function(e){l+='<li data-id ="'+e.id+'" data-to="to-'+e.id+'">'+e.name+"</li>"}),$("#town").empty().append(l))})}),$("#town").on("click","li",function(){$(this).siblings().removeClass("chosed"),$(this).addClass("chosed");var e=($(this).attr("data-id"),$(this).attr("data-to")),t=$(this).html();if(delete u.li,delete u.st,"不限"==t){$("#dic > p").html(n);var a=i.parseCondition({condition:c});$.extend(u,a),delete u.ne,delete u.to;var o=i.objectToString(u);console.log(o),window.location.href=s+o+d}else if($(this).attr("data-ne")){var l=$(this).attr("data-ne");if($.cookie("location_latitude")&&$.cookie("location_longitude")){delete u.di,delete u.to;var r=i.parseCondition({condition:l});$.extend(u,r);var h=i.objectToString(u);window.location.href=s+h+d}else $(".location-name").html("定位失败")}else{$("#dic > p").html(t);var p=c+"-"+e;delete u.ne;var f=i.parseCondition({condition:p});$.extend(u,f);var v=i.objectToString(u);console.log(v),window.location.href=s+v+d}$(".bac").hide(),$("#dic").children("span").removeClass("direction"),$("#dic").find("i").addClass("bacchosed"),$("#dic").addClass("chosed"),$(".dic").slideToggle()})}}}),e.request(e.apiUrl.rent.list.citySubway,{cityId:a},{successCallback:function(e){if(1==e.status&&e.data.length){var t=e,a=t.data,o="",l="",n="",c="";a.forEach(function(e){u.li&&u.li==e.id?($(".dic-content").hide(),$(".metro-content").show(),$(".tabs > ul > li:eq(0)").removeClass("active-color-dic"),$(".tabs > ul > li:eq(1)").addClass("active-color-dic"),o+='<li class="areas-subway" data-id ="'+e.id+'" data-li="li-'+e.id+'">'+e.name+"</li>",u.st?(l="<li>不限</li>",e.subList.forEach(function(e){u.st==e.id?(l+="<li  class='chosed' data-id =\""+e.id+'" data-st="st-'+e.id+'">'+e.name+"</li>",$("#dic > p").html(e.name)):l+='<li data-id ="'+e.id+'" data-st="st-'+e.id+'">'+e.name+"</li>"})):(l="<li class='chosed'>不限</li>",e.subList.forEach(function(e){l+='<li data-id ="'+e.id+'" data-st="st-'+e.id+'">'+e.name+"</li>"}),n=e.name,$("#dic > p").html(n)),c="li-"+e.id,$("#dic").find("i").addClass("bacchosed"),$("#dic").addClass("chosed")):o+='<li data-id ="'+e.id+'" data-li="li-'+e.id+'">'+e.name+"</li>"}),$("#metroStation").append(l),$("#metroLine").append(o),$("#metroLine > li").click(function(){var e=$(this).attr("data-id");c=$(this).attr("data-li"),n=$(this).html(),$(this).siblings().removeClass("areas-subway"),$(this).addClass("areas-subway"),a.forEach(function(t){e==t.id&&t.subList&&(u.li==t.id&&u.st?(l="<li>不限</li>",t.subList.forEach(function(e){l+=u.st==e.id?'<li class="chosed"  data-id ="'+e.id+'" data-st="st-'+e.id+'">'+e.name+"</li>":'<li data-id ="'+e.id+'" data-st="st-'+e.id+'">'+e.name+"</li>"})):u.li!=t.id||u.st?u.li!=t.id&&(l="<li>不限</li>",t.subList.forEach(function(e){l+='<li data-id ="'+e.id+'" data-st="st-'+e.id+'">'+e.name+"</li>"})):(l="<li class='chosed'>不限</li>",t.subList.forEach(function(e){l+='<li data-id ="'+e.id+'" data-st="st-'+e.id+'">'+e.name+"</li>"})),$("#metroStation").empty().append(l))})}),$("#metroStation ").on("click","li",function(){$(this).siblings().removeClass("chosed"),$(this).addClass("chosed");var e=($(this).attr("data-id"),$(this).attr("data-st")),t=$(this).html();if(delete u.di,delete u.to,delete u.ne,"不限"==$(this).html()){$("#dic > p").html(n);var a=i.parseCondition({condition:c});$.extend(u,a),delete u.st;var o=i.objectToString(u);console.log(o),window.location.href=s+o+d}else{$("#dic > p").html(t);var l=c+"-"+e,r=i.parseCondition({condition:l});$.extend(u,r);var h=i.objectToString(u);window.location.href=s+h+d}$(".bac").hide(),$("#dic").children("span").removeClass("direction"),$("#dic").find("i").addClass("bacchosed"),$("#dic").addClass("chosed"),$(".dic").slideToggle()})}else $(".subway").hide()}}),e.firstGivePage(u),$(".price-list > ul >li").click(function(){if($(this).siblings().removeClass("chosed"),$(this).addClass("chosed"),$(".bac").hide(),$("#price").children("span").removeClass("direction"),delete u.cp,"不限"==$(this).html()){$("#price>p").html("租金"),$("#price").find("i").removeClass("bacchosed"),$("#price").removeClass("active-color-top"),$("#price").removeClass("chosed"),delete u.pr;var e=i.objectToString(u);console.log(e),window.location.href=s+e+c}else{$("#price>p").html($(this).html().replace(/\s|\xA0/g,"")),$("#price").find("i").addClass("bacchosed"),$("#price").addClass("active-color-top");var t=$(this).attr("data-pr"),a=i.parseCondition({condition:t});$.extend(u,a);var o=i.objectToString(u);window.location.href=s+o+c}$(".price-total").slideToggle()}),$("#selfPrConf").click(function(e){e.preventDefault();var t=$("#lowPr").val(),a=$("#topPr").val();if($(".wrong").hide(),t&&a)if(parseInt(t)>parseInt(a))$(".wrong").show(),setTimeout(function(){$(".wrong").hide()},2e3);else{$("#price>p").html(t+"-"+a),$("#price").find("i").addClass("bacchosed"),$("#price").addClass("active-color-top"),delete u.pr;var o={cp:t+"to"+a};$.extend(u,o);var l=i.objectToString(u);console.log(l),window.location.href=s+l+c,$(".bac").hide(),$("#price").children("span").removeClass("direction"),$(".price-total").slideToggle()}else{if(""==t&&a){$("#price>p").html(a+"以下"),$("#price").find("i").addClass("bacchosed"),$("#price").addClass("active-color-top"),delete u.pr;var n={cp:"0to"+a};$.extend(u,n);var d=i.objectToString(u);console.log(d),window.location=s+d+c}else if(""==a&&t){$("#price>p").html(t+"以上"),$("#price").find("i").addClass("bacchosed"),$("#price").addClass("active-color-top"),delete u.pr;var r={cp:t+"to0"};$.extend(u,r);var h=i.objectToString(u);console.log(h),window.location.href=s+h+c}else{$("#price>p").html("租金"),$("#price").find("i").removeClass("bacchosed"),$("#price").removeClass("active-color-top"),$("#price").removeClass("chosed"),delete u.pr,delete u.cp;var p=i.objectToString(u);console.log(p),window.location.href=s+p+c}$(".bac").hide(),$("#price").children("span").removeClass("direction"),$(".price-total").slideToggle()}}),$("#moreComf").click(function(){var e=$(".more-spec > ul >li"),t=$(".area > ul >li"),a=$(".decoration > ul >li"),o=$(".house-list  > ul > li "),l=$(".rent-way  > ul > li "),n="",d="",r="",h=[],p="",f={},v={},m={},C={},g=[],b="",w=[],y=[],T={};o.each(function(e,t){1==t.classList.length?w.push(e):y.push(e)}),w.length>0&&(w.forEach(function(e,t){b=0==t?$(".house-list  > ul > li:eq("+e+")").attr("data-la"):b+"-"+$(".house-list  > ul > li:eq("+e+")").attr("data-la")}),T=i.parseCondition({condition:b})),e.each(function(e,t){1==t.classList.length?0==e?n="ta-1":n+="-ta-1":0==e?n="ta-0":n+="-ta-0"}),t.each(function(e,t){1==t.classList.length&&g.push(e)}),g.length>0&&g.forEach(function(e,t){d=0==t?$(".area > ul >li:eq("+e+")").attr("data-ar"):d+"-"+$(".area > ul >li:eq("+e+")").attr("data-ar")}),a.each(function(e,t){1==t.classList.length&&h.push(e)}),h.length>0&&h.forEach(function(e,t){r=0==t?$(".decoration > ul >li:eq("+e+")").attr("data-dt"):r+"-"+$(".decoration > ul >li:eq("+e+")").attr("data-dt")}),l.each(function(e,t){1==t.classList.length&&(p=$(".rent-way  > ul > li:eq("+e+")").attr("data-rw"))}),p?(delete u.er,delete u.fs,f=i.parseCondition({condition:p})):(delete u.er,delete u.fs),n?v=i.parseCondition({condition:n}):delete u.ta,d?m=i.parseCondition({condition:d}):delete u.ar,r?C=i.parseCondition({condition:r}):delete u.dt,m.ar||C.dt||v.ta||5!=y.length||0!=w[0]||p?($("#type").find("i").addClass("bacchosed"),$("#type").removeClass("active-color-top"),$("#type").addClass("chosed")):($("#type").find("i").removeClass("bacchosed"),$("#type").removeClass("active-color-top"),$("#type").removeClass("chosed")),$(".bac").hide(),$("#type").children("span").removeClass("direction"),$(".type").slideToggle(),$.extend(u,T,v,m,C,f);var q=i.objectToString(u);window.location.href=s+q+c}),u.so){var p=$(".sort-chose>ul>li"),f=i.objectToString({so:u.so});p.each(function(e,t){f==$(".sort-chose>ul>li:eq("+e+")").attr("data-so")&&($(".sort-chose>ul>li:eq("+e+")").siblings().removeClass("chosed"),$(".sort-chose>ul>li:eq("+e+")").addClass("chosed"))}),"so-0"!=f?($("#sortTop").find("i").addClass("bacchosed"),$("#sortTop").addClass("chosed")):($("#sortTop").find("i").removeClass("bacchosed"),$("#sortTop").removeClass("chosed"))}return $(".sort-chose>ul>li").click(function(){$(".bac").css({"z-index":"10",top:"4.5rem"}),$(".bac").hide(),$(this).siblings().removeClass("chosed"),$(this).addClass("chosed"),$(".sort-chose").slideToggle();var e=$(this).attr("data-so");"so-0"!=e?($("#sortTop").find("i").addClass("bacchosed"),$("#sortTop").removeClass("active-color-top"),$("#sortTop").addClass("chosed")):($("#sortTop").find("i").removeClass("bacchosed"),$("#sortTop").removeClass("active-color-top"),$("#sortTop").removeClass("chosed"));var t=i.parseCondition({condition:e});$.extend(u,t);var a=i.objectToString(u);console.log(a),window.location.href=s+a+c}),$(".clearOption").click(function(){window.location.href=s+d}),e.pullData(n,a),require(["../components/list-search.min"],function(e){e.init(i),e.searchInputClick(h,u,s,d,a)}),$(".icon-hanbao").click(function(){$(".bac").css({"z-index":"16",top:"0"}),$(".bac").show(),$(".slide-right").show(),$(".slide-right").animate({right:"0"})}),require(["../components/bigdata.min"],function(e){e.init(i),e.bigData({pageName:"1202",channel:h,type:1})}),$(".writ-price").click(function(e){e.stopPropagation()}),$(".price-list > ul").scroll(function(e){e.stopPropagation()}),e}return _inherits(t,e),_createClass(t,[{key:"readyFun",value:function(){setTimeout(function(){$(".total-num").hide(),$(".all-control").css("margin-top","8.5rem")},1500),$(".content-hight").height(.7*$(window).height()-$(".tabs").height())}},{key:"choseFun",value:function(e){var t=this,i=$(window).scrollTop();$(".rent-list > ul > li").click(function(){$(this).siblings().removeClass("active-color-top"),$(this).toggleClass("active-color-top");var a=$(".rent-list > ul > li > span >i");a.each(function(e,t){1==t.classList.length?$(".rent-list > ul > li:eq("+e+")").addClass("chosed"):$(".rent-list > ul > li:eq("+e+")").removeClass("chosed")}),$(this).siblings().children("span").removeClass("direction"),$(this).children("span").toggleClass("direction"),$(window).scrollTop()&&(i=$(window).scrollTop()),$(this).children("span").hasClass("direction")?($(".bac").show(),$("body").addClass("noscroll")):($(".bac").hide(),$("body").removeClass("noscroll"),i&&$(window).scrollTop(i));var s=$(this).index();0==s?($(".dic").stop(),$(".price-total").hide(),$(".house-type").hide(),$(".sort-chose").hide(),$(".dic").slideToggle("fast")):1==s?($(".bac").stop(),$(".dic").hide(),$(".house-type").hide(),$(".sort-chose").hide(),$(".price-total").slideToggle("fast")):2==s?($(".bac").stop(),$(".dic").hide(),$(".price-total").hide(),$(".sort-chose").hide(),$(".house-type").slideToggle("fast")):3==s&&($(".bac").stop(),$(".dic").hide(),$(".price-total").hide(),$(".house-type").slideUp(),$(".sort-chose").slideToggle("fast")),$(".bac").css({"z-index":"10",top:"4.5rem"}),t.firstGivePage(e)}),$(".tabs > ul > li").click(function(){$(this).siblings().removeClass("active-color-dic"),$(this).addClass("active-color-dic");var e=$(this).index();0==e?($(".metro-content").hide(),$(".dic-content").slideDown()):1==e&&($(".dic-content").hide(),$(".metro-content").slideDown())}),$(".more-spec > ul >li").click(function(){$(this).toggleClass("active-house")}),$(".area > ul >li").click(function(){$(this).toggleClass("active-house")}),$(".decoration > ul >li").click(function(){$(this).toggleClass("active-house")}),$(".house-list > ul > li").click(function(){var e=$(this).index();if(0==e)$(this).siblings().removeClass("active-house"),$(this).addClass("active-house");else{$(this).toggleClass("active-house");var t=$(".house-list > ul > li"),i=[];t.each(function(e,t){1==t.classList.length?0==e&&$(".house-list > ul > li:eq(0)").removeClass("active-house"):i.push(e)}),i.length>5&&$(".house-list > ul > li:eq(0)").addClass("active-house")}}),$(".bac").click(function(){$(".dic").slideUp(),$(".price-total").slideUp(),$(".house-type").slideUp(),$(".more").slideUp(),$(".rent-list > ul > li").children("span").removeClass("direction"),$(".rent-list > ul > li").removeClass("active-color-top"),$(".bac").hide().css({"z-index":"10",top:"4.5rem"}),$(".slide-right").animate({right:"-50%"}).hide(),$(".sort-chose").hide(),$("body").removeClass("noscroll"),$(window).scrollTop(i)}),$("#cancelMore").click(function(){$(".more-spec > ul >li").removeClass("active-house"),$(".area > ul >li").removeClass("active-house"),$(".decoration > ul >li").removeClass("active-house"),$(".rent-way > ul >li").removeClass("active-house"),$(".house-list>ul>li:eq(0)").addClass("active-house"),$(".house-list>ul>li:eq(0)").siblings().removeClass("active-house")}),$(".rent-way > ul > li").click(function(){$(this).addClass("active-house"),$(this).siblings().removeClass("active-house")})}},{key:"firstGivePage",value:function(e){var t=this;if(e.la){var i=($(".house-list>ul>li"),[0,1,2,3,4,5]);e.la.length>1?(e.la.forEach(function(e){$(".house-list>ul>li:eq("+e+")").addClass("active-house"),i.forEach(function(t,a){e==t&&i.splice(a,1)})}),i.forEach(function(e){$(".house-list>ul>li:eq("+e+")").removeClass("active-house")}),$("#type").find("i").addClass("bacchosed"),$("#type").addClass("chosed")):($(".house-list>ul>li:eq("+e.la+")").addClass("active-house"),$(".house-list>ul>li:eq("+e.la+")").siblings().removeClass("active-house"))}else $(".house-list>ul>li:eq(0)").addClass("active-house"),$(".house-list>ul>li:eq(0)").siblings().removeClass("active-house");if(e.pr){var a=$(".price-list>ul>li"),s=t.objectToString({pr:e.pr});a.each(function(e,t){s==$(".price-list>ul>li:eq("+e+")").attr("data-pr")&&($(".price-list>ul>li:eq("+e+")").addClass("chosed"),$("#price>p").html($(".price-list>ul>li:eq("+e+")").html().replace(" - ","-")),$("#price").find("i").addClass("bacchosed"),$("#price").addClass("chosed"))})}else if(e.cp){var o=e.cp.split("to");0!=o[0]&&0!=o[1]?($("#lowPr").val(o[0]),$("#topPr").val(o[1]),$("#price>p").html(o[0]+"-"+o[1])):0==o[0]&&0!=o[1]?($("#topPr").val(o[1]),$("#price>p").html(o[1]+"以下")):0!=o[0]&&0==o[1]&&($("#lowPr").val(o[0]),$("#price>p").html(o[0]+"以上")),$("#price").find("i").addClass("bacchosed"),$("#price").addClass("chosed")}else $(".price-list>ul>li:eq(0)").addClass("chosed");var l="ta-0-ta-0-ta-0-ta-0-ta-0-ta-0";if(e.ta&&(l=t.objectToString({ta:e.ta})),"ta-0-ta-0-ta-0-ta-0-ta-0-ta-0"!=l||e.ar||e.dt||e.la&&"0"!=e.la||e.er||e.fs?($("#type").find("i").addClass("bacchosed"),$("#type").addClass("chosed")):($("#type").find("i").removeClass("bacchosed"),$("#type").removeClass("chosed")),e.ta?e.ta.forEach(function(e,t){1==e?$(".more-spec > ul >li:eq("+t+")").addClass("active-house"):$(".more-spec > ul >li:eq("+t+")").removeClass("active-house")}):$(".more-spec > ul >li").removeClass("active-house"),e.ar){var n=[0,1,2,3,4,5,6];e.ar.length>1?e.ar.forEach(function(e,t){$(".area>ul>li:eq("+e+")").addClass("active-house"),n.forEach(function(t,i){e==t&&n.splice(i,1)})}):($(".area>ul>li:eq("+e.ar+")").addClass("active-house"),n.forEach(function(t,i){e.ar==t&&n.splice(i,1)})),n.forEach(function(e){$(".area>ul>li:eq("+e+")").removeClass("active-house")})}else $(".area>ul>li").removeClass("active-house");if(e.dt){var c=[1,2,3,4,5];e.dt.length>1?e.dt.forEach(function(e,t){$(".decoration> ul >li:eq("+(e-1)+")").addClass("active-house"),c.forEach(function(t,i){e==t&&c.splice(i,1)})}):($(".decoration> ul >li:eq("+(e.dt-1)+")").addClass("active-house"),c.forEach(function(t,i){e.dt==t&&c.splice(i,1)})),c.forEach(function(e){$(".decoration> ul >li:eq("+(e-1)+")").removeClass("active-house")})}else $(".decoration> ul >li").removeClass("active-house");e.fs&&$(".rent-way > ul >li:eq(1)").addClass("active-house"),e.er&&$(".rent-way > ul >li:eq(0)").addClass("active-house")}},{key:"parseCondition",value:function(e){var t=e.condition,i=e.separator,a=void 0===i?"-":i,s={};if(!t)return s;var o=t.split(a);return 1===o.length?o[0]:(o.forEach(function(e,t){var i=o.length<t+2?"":o[t+1];t%2==0&&(s.hasOwnProperty(e)?(s[e].constructor!=Array&&(s[e]=[s[e]]),s[e].push(i)):s[e]=i)}),s)}},{key:"objectToString",value:function(e){var t=[],i=[];for(var a in e)t.push(a),i.push(e[a]);var s="";return t.forEach(function(e,t){0==t?i[t].constructor==Array?i[t].forEach(function(t,i){s=0==i?e+"-"+t:s+"-"+e+"-"+t}):s=e+"-"+i[t]:i[t].constructor==Array?i[t].forEach(function(t,i){s=s+"-"+e+"-"+t}):s=s+"-"+e+"-"+i[t]}),s}},{key:"creatRent",value:function(e,t,i){var a="",s="";i.houseTag.isSubwayHouse&&(a+='<span class="tag nears">近地铁</span>'),i.houseTag.isPriceDown&&(a+='<span class="tag priced">降价</span>'),i.houseTag.isNewHouse&&(a+='<span class="tag newup">新上</span>'),i.houseTag.isShortRent&&(a+='<span class="tag anthert">可短租</span>'),1==i.houseTag.isHardcover&&(a+='<span class="tag anthert">精装</span>'),2==i.houseTag.isHardcover&&(a+='<span class="tag anthert">豪装</span>'),i.houseTag.isSouth&&(a+='<span class="tag anthert">朝南</span>'),i.houseTag.isZeroCommission&&(s=' <span class="commission">0 佣金</span>');var o="";1==i.houseTag.hasVideo&&(o='<span class="play"><i></i></span>');var l="";null!=i.distanceSubway&&(l='<p class="base-info">'+i.distanceSubway+"</p>");var n=encodeURIComponent(JSON.stringify({eventName:"1202039",eventParam:{rent_house_id:i.houseId},channel:t||"",type:2})),c='<a  class="rent-item box" href=" '+i.url+'" data-bigdata="'+n+'">\n            <div class="left">\n                <img src="'+i.firstImageUrl+'?x-oss-process=image/resize,w_120" alt="'+i.estateName+' " class="lazy">\n                '+o+"\n                "+s+'\n            </div>\n            <div class="right">\n                <h4> '+i.houseTitle+'</h4>\n                <p class="base-info">                    \n                   '+i.houseTypeStr+" "+i.spaceArea+"㎡ | "+i.districtAndTownName+"\n                </p>\n                "+l+'\n                <p class="tags">'+a+'</p>\n                <p class="unit-price"> <span>'+i.rentPriceStr+"</span> 元/月</p>\n            </div>\n        </a>";return c}},{key:"pullload",value:function(e,t){var i=this,a=$.cookie("pinyin")||"shanghai";$(".rent-items").pullload({apiUrl:this.apiUrl.rent.list.rentHouseList,requestType:"post",queryStringObject:e,traditional:!0,pageSize:10,threshold:50,callback:function(s){s.data&&$.each(s.data,function(s,o){o.url="/"+a+"/rent/"+o.encryptHouseId+".html",$(".rent-items").append(i.creatRent(e,t,o))})}})}},{key:"pullData",value:function(e,t){var i={};if(e){var a=this.parseCondition({condition:e}),s=["0-50","50-70","70-90","90-110","110-130","130-150","150-200","200-300","300-0"];if(i={cityId:t,bedRoomSumLists:[],renovations:[],spaceAreas:[]},a.di&&(i.districtId=a.di),a.to&&(i.townId=a.to),a.li&&(i.subwayLine=a.li),a.st&&(i.subwayStation=a.st),a.la&&(a.la.constructor==Array?i.bedRoomSumLists=a.la:0==a.la?i.bedRoomSumLists=[]:i.bedRoomSumLists.push(a.la)),a.pr&&(a.pr.constructor==Array?(i.rentPriceStart=a.pr[0],i.rentPriceEnd=a.pr[1]):i.rentPriceStart=a.pr),a.cp){var o=a.cp.split("to");i.rentPriceStart=o[0],i.rentPriceEnd=o[1]}a.ta&&(i.isZeroCommission=a.ta[0],i.isSubWay=a.ta[1],i.priceDown=a.ta[2],i.isNewOnStore=a.ta[3],i.isShortRent=a.ta[4],i.orientation=a.ta[5]),a.ar&&(a.ar.constructor==Array?a.ar.forEach(function(e){i.spaceAreas.push(s[e])}):i.spaceAreas.push(s[a.ar])),a.dt&&(a.dt.constructor==Array?i.renovations=a.dt:i.renovations.push(a.dt)),a.so&&(i.orderType=a.so),a.ne&&(i.endMetres=a.ne,i.localLon=$.cookie("location_longitude"),i.localLat=$.cookie("location_latitude")),a.er&&(i.isEntire=a.er),a.fs&&(i.isShared=a.fs)}else i={cityId:t};var l="";this.GetRequest().districtId&&(i.districtId=this.GetRequest().districtId),this.GetRequest().townId&&(i.townId=this.GetRequest().townId),this.GetRequest().subwayLine&&(i.subwayLine=this.GetRequest().subwayLine),this.GetRequest().subwayStation&&(i.subwayStation=this.GetRequest().subwayStation),this.GetRequest().subEstateId&&(i.subEstateId=this.GetRequest().subEstateId),this.GetRequest().channel&&(l=this.GetRequest().channel),this.pullload(i,l)}},{key:"GetRequest",value:function(){var e=location.search,t={};if(e.indexOf("?")!==-1)for(var i=e.substr(1),a=i.split("&"),s=0;s<a.length;s++)t[a[s].split("=")[0]]=a[s].split("=")[1];return t}}]),t}(Controller);$(document).ready(function(){new ListController});
//# sourceMappingURL=list.min.js.map
