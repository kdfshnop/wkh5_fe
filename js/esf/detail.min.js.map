{"version":3,"sources":["esf/detail.min.js"],"names":["DetailController","$","lazyload","staticDomain","addListenerToDownloadApp","click","nativeSchema","loadSchema","schema","val","protocal","loadWaiting","failUrl","apkInfo","PKG","CATEGORY","ACTION","addListenerToAssistant","fiveLine","encryptsubestateid","attr","that","request","apiUrl","community","chart","subEstateId","successCallback","data","status","dataRes","echartData","recombineM","echartFun","self","require","Album","BigData","init","bigData","GetRequest","hide","rowNum","Math","round","height","parseFloat","css","addClass","show","removeClass","seriesData","countNum","echartShow","forEach","item","index","push","sortArray","sort","a","b","maxPrice","ceil","length","minPrice","avgPrice","myChart","echarts","document","getElementById","width","houseId","subestateid","echartBigData","option","tooltip","trigger","triggerOn","position","backgroundColor","padding","textStyle","color","fontSize","formatter","params","ticket","callback","paramsValue","value","common","grid","bottom","left","right","containLabel","xAxis","monthList","splitLine","axisTick","type","boundaryGap","axisLine","lineStyle","axisLabel","interval","rotate","fontFamily","yAxis","inside","toFixed","min","max","series","name","normal","itemStyle","emphasis","borderColor","borderWidth","connectNulls","setOption","month","date","split","indexOf","charAt","unitPrice","console","log","url","location","search","theRequest","str","substr","strs","i","Controller","ready"],"mappings":"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","file":"detail.min.js","sourcesContent":["/*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n 1. 项目名称：悟空找房h5\r\n 2. 页面名称：esf/detail(二手房-详情)\r\n 3. 作者：liyang@lifang.com\r\n -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\r\nclass DetailController extends Controller {\r\n    constructor() {        \r\n        // 初始化\r\n        super() ;        \r\n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n        图片懒加载实例化\r\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/        \r\n        $(\".lazy\").lazyload({ \r\n            \"placeholder\" : this.staticDomain + \"/wkh5_fe/images/common/loading.jpg\"\r\n        }) ;  \r\n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n        downloadApp条事件绑定\r\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\r\n        this.addListenerToDownloadApp() ;\r\n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n        打开app按钮点击处理\r\n        schemes参数规则请参照：http://confluence.wkzf/pages/viewpage.action?pageId=80329073\r\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\r\n        $(\".download-app .download\").click(()=> {\r\n            nativeSchema.loadSchema({               \r\n                schema : \"external_call/parameter?t=0&bt=1&houseId=\" + $(\"#houseId\").val() + \"&systemHouseType=1\"  ,  // 通过NN打开某个链接\r\n                protocal : \"wkzf\" , //schema头协议，实际情况填写\r\n                loadWaiting : \"1500\" , //发起唤醒请求后，会等待loadWaiting时间，超时则跳转到failUrl，默认3000ms                \r\n                failUrl : \"https://m.wkzf.com/download/transit?from=esfDetail\" ,  //唤起失败时的跳转链接，默认跳转到下载页\r\n                // apk信息,请根据实际情况填写\r\n                apkInfo : {\r\n                    PKG : \"com.wukong.ua\" ,\r\n                    CATEGORY : \"android.intent.category.DEFAULT\" ,\r\n                    ACTION : \"android.intent.action.VIEW\"\r\n                }\r\n            }) ;\r\n        }) ;\r\n        /*\r\n        new WakeupApp({\r\n            element : \".download-app .download\" ,\r\n            androidSchemes : \"wkzf://external_call/parameter?t=0&bt=1&houseId=\" + $(\"#houseId\").val() + \"&systemHouseType=1\" ,\r\n            isoSchemes : \"wkzf://external_call/parameter?t=0&bt=1&houseId=\" + $(\"#houseId\").val() + \"&systemHouseType=1\" ,\r\n            androidDownloadLink : \"https://m.wkzf.com/download/transit?from=esfDetail\" ,\r\n            iosDownloadLink : \"https://m.wkzf.com/download/transit?from=esfDetail\"\r\n        }) ;\r\n        */\r\n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n        底部经纪人助手条处理\r\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\r\n        this.addListenerToAssistant() ;\r\n\r\n         this.fiveLine() ;         \r\n        // 获取小区加密Id\r\n        let  encryptsubestateid = $('#estateName').attr('data-encryptsubestateid');\r\n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n        请求接口 获取折线图参数\r\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\r\n         let that = this;\r\n         this.request(this.apiUrl.community.chart,{subEstateId:encryptsubestateid},{successCallback(data){\r\n             if (data.status == 1){\r\n                 let dataRes = data;\r\n                 let echartData =  that.recombineM(dataRes.data);\r\n                 that.echartFun(echartData) ;\r\n             }\r\n          }});\r\n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n        页面埋点和相册需要的模块\r\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\r\n        let self = this;\r\n        require([ '../components/album.min','../components/bigdata.min'],function(Album, BigData){\r\n            BigData.init(that);\r\n            BigData.bigData({\r\n                \"pageName\": \"1067\",\r\n                \"pageParam\":{\r\n                    \"house_id\": $('#estateName').attr('data-houseid'),\r\n                    \"boutique\": $('#estateName').attr('data-boutique')\r\n                },\r\n                \"channel\":self.GetRequest()['channel'] || \"\",\r\n                \"type\": 1\r\n            });\r\n        });\r\n    }        \r\n    /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n    判断文本是否大于5行\r\n    -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\r\n    fiveLine(){\r\n        $('.more').hide();\r\n        let rowNum=Math.round($(\".base-info\").height()/parseFloat($(\".base-info\").css('line-height')));\r\n        if(rowNum > 5){\r\n            $(\".base-info\").addClass('word-line');\r\n            $('.more').show();\r\n        }else {\r\n            $(\".base-info\").removeClass('word-line');\r\n            $('.more').hide();\r\n        }\r\n        $('.more').click(function () {\r\n            $(\".base-info\").removeClass('word-line');\r\n            $('.more').hide();\r\n        });\r\n    }\r\n    /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n    折线图函数异步操作\r\n    -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\r\n    echartFun(echartData){\r\n        let seriesData=[];\r\n        let countNum = 0;\r\n        let echartShow = true;\r\n        echartData.seriesData.forEach(function(item,index){\r\n            if(item == 0){\r\n                seriesData.push(null);\r\n                countNum += 1;\r\n                if (countNum == 11 && index == 10){\r\n                    echartShow = false;\r\n                }\r\n            }else{\r\n                seriesData.push(parseFloat(item));\r\n            }\r\n        });\r\n        if (!echartShow) {\r\n            $('#estateName').hide();\r\n            return\r\n        }\r\n        let sortArray = echartData.seriesData.sort(function(a, b) {\r\n            return parseFloat(a) - parseFloat(b);\r\n        });\r\n        /* 按照3.12需求文档走势图数据要求*/\r\n        let maxPrice = Math.ceil((sortArray[sortArray.length - 1] / 1000)) * 1000;\r\n        let minPrice = null;  //Math.ceil((sortArray[0] / 1000) - 1) * 1000;\r\n        sortArray.forEach(function (item,index) {\r\n            if (item !=0){\r\n                minPrice =   Math.ceil((item / 1000) - 1) * 1000;\r\n                return minPrice\r\n            }\r\n        });\r\n        let avgPrice = 1000 ;\r\n        if (maxPrice == minPrice ) {\r\n            minPrice = maxPrice - 2000;\r\n            avgPrice = 1000\r\n        }else{\r\n            avgPrice = ((maxPrice - minPrice)/4) < 1000 ? 1000:Math.ceil((maxPrice - minPrice)/4000)*1000;\r\n        }\r\n        minPrice =  minPrice < 0 ? 0:minPrice;\r\n        let myChart = echarts.init(document.getElementById('main'),{ width: '88%' });\r\n        let that = this;\r\n        // 给折线图dome增加埋点\r\n        let houseId =  $('#estateName').attr('data-houseid');\r\n        let subestateid =  $('#estateName').attr('data-subestateid') ;\r\n        let echartBigData = {\r\n            \"eventName\": \"1067014\",\r\n            \"eventParam\": { \"house_id\" : houseId , \"estate_id\": subestateid },\r\n            \"type\": 2\r\n        };\r\n        // 指定图表的配置项和数据\r\n        let option = {\r\n            tooltip: {      // 提示框\r\n                trigger: 'item',\r\n                triggerOn: 'click',\r\n                position: 'top',\r\n                backgroundColor: '#92A7C3',\r\n                padding: 4,\r\n                textStyle: {\r\n                    color: '#fff',\r\n                    fontSize: '12'\r\n                },\r\n                formatter:function (params, ticket, callback) {\r\n                    let paramsValue =  params.value + \"元\";\r\n                    that.request(that.apiUrl.common.bigData , echartBigData ,function () {\r\n\r\n                    });\r\n                    return paramsValue;\r\n                }\r\n            },\r\n            grid: {\r\n                bottom: 20,\r\n                left: '3%',\r\n                right: '10%',\r\n                containLabel: true,\r\n            },\r\n            xAxis: {\r\n                data: echartData.monthList ,  // X坐标数据\r\n                splitLine: {show: false}, // 控制网格线是否显示\r\n                axisTick: {show: false},  // 去除x轴上的刻度线\r\n                position: 'bottom',\r\n                type: 'category',\r\n                boundaryGap: false,\r\n                axisLine: {\r\n                    lineStyle: {\r\n                        color: '#979797', // x轴颜色\r\n                    }\r\n                },\r\n                axisLabel: {\r\n                    interval: 0,\r\n                    rotate: 0, //60度角倾斜显示\r\n                    textStyle: {\r\n                        color: '#999',\r\n                        fontSize: 12,\r\n                        fontFamily: '微软雅黑'\r\n                    }\r\n                },\r\n            },\r\n            yAxis: {\r\n                axisLine: {show: false},   // y轴是否显示\r\n                splitLine: {\r\n                    show: true,  // 控制网格线是否显示\r\n                    lineStyle: {\r\n                        color: ['#979797'] // y刻度颜色\r\n                    }\r\n                },\r\n                axisTick: {show: false},// 去除y轴上的刻度线\r\n                axisLabel:{\r\n                    inside: false,\r\n                    textStyle: {\r\n                        color: '#999',\r\n                    },\r\n                    formatter: function(value, index) {\r\n                        if (value == 0) {\r\n                            return \"\";\r\n                        } else {\r\n                            return (value / 10000).toFixed(1) + '万';\r\n                        }\r\n                    }\r\n                },\r\n                min:minPrice,\r\n                max:minPrice+avgPrice*5,\r\n                interval:avgPrice,\r\n            },\r\n            series: [{\r\n                name: '销量',\r\n                type: 'line',\r\n                lineStyle:{\r\n                    normal:{\r\n                        color:'#92A7C3', // 折线条颜色\r\n                    }\r\n\r\n                },\r\n                itemStyle:{\r\n                    normal:{\r\n                        color: \"#92A7C3\" //图标颜色\r\n                    },\r\n                    emphasis: { //重点，强调时候的样式，即当鼠标悬停或点击上去的时候的拐点的样式\r\n                        borderColor: '#92A7C3',\r\n                        borderWidth: 2,\r\n                        color: '#92A7C3'\r\n                    }\r\n                },\r\n                connectNulls: true,\r\n                data: seriesData,\r\n            }],\r\n        };\r\n        myChart.setOption(option);\r\n    };\r\n    /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n    处理得到的数据的函数  处理月份和数据\r\n    -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\r\n    recombineM(data) {\r\n        let echartData = {\r\n            monthList: [],\r\n            seriesData: []\r\n        };\r\n        if (data) {\r\n            data.forEach((item) => {\r\n                let month = item.date.split('-')[1];\r\n                if (month.indexOf('0') == 0) {\r\n                    echartData.monthList.push(month.charAt(1)+'月')\r\n                } else {\r\n                    echartData.monthList.push(month+'月')\r\n                }\r\n                echartData.seriesData.push(item.unitPrice)\r\n            });\r\n        }\r\n        console.log(echartData);\r\n        return echartData ;\r\n    }\r\n    /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n     截取？后面的参数\r\n     -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\r\n    GetRequest() {\r\n        let url = location.search;\r\n        let theRequest = {};\r\n        if (url.indexOf(\"?\") !== -1) {\r\n            let str = url.substr(1);\r\n            let strs = str.split(\"&\");\r\n            for(var i = 0; i < strs.length; i ++) {\r\n                theRequest[strs[i].split(\"=\")[0]]=strs[i].split(\"=\")[1];\r\n            }\r\n        }\r\n        // console.log(theRequest);\r\n        return theRequest;\r\n    }\r\n}\r\n\r\n\r\n/*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n类的初始化\r\n-----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\r\n$(document).ready(function() {\r\n    new DetailController;\r\n});"]}