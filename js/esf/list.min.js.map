{"version":3,"sources":["esf/list.min.js"],"names":["ListController","self","paramGenerator","ParamGenerator","$","slideUp","lazyload","staticDomain","require","BigData","Filter","init","filter","extend","ESFDEFAULT","el","cityId","val","controller","near","filterChanged","result","param","generateParamObj","di","to","li","st","mapping","forEach","item","goto","ConningTower","data","id","sdi","sto","sli","sst","sid","key","type","value","setLocationInfo","window","bigData","pageUrl","location","origin","pathname","replace","tmpArr","split","obj","queryString2Object","bindEvent","pullload","insertTrendAndOldHouse","cityPinyin","url","object2QueryString","href","search","click","str","channel","encryptHouseId","encodeURIComponent","houseId","houseImgUrl","estateName","houseTitle","houseChild","areaStr","district","town","tagList","map","tag","join","totalPrice","unitPrice","count","hideNoData","length","hide","createHouseItems","html","text","slideDown","setTimeout","showNoData","append","show","cityName","$list","insertAfter","cookie","apiUrl","esf","list","houselist","queryStringObject","pa","requestType","threshold","pageSize","pageIndexKey","pageSizeKey","callback","houseList","appendHouseList","Controller","document","ready"],"mappings":"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","file":"list.min.js","sourcesContent":["/*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n 1. 项目名称：悟空找房h5\n 2. 页面名称：esf/list(二手房列表)\n 3. 作者：zhaohuagang@lifang.com\n -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\nclass ListController extends Controller {\n    constructor() {        \n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n        类的初始化，继承控制器基类\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n        super() ;        \n        var self = this;        \n        this.paramGenerator = new ParamGenerator();\n        $('.total').slideUp(1000);// 隐藏查询总条数   \n        \n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n        图片懒加载实例化\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/        \n        $(\".lazy\").lazyload({ \n            \"placeholder\" : this.staticDomain + \"/wkh5_fe/images/common/loading.jpg\"\n        }) ;\n        \n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n        加载相关页面组件逻辑\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n        require([ \"../components/bigdata.min\" , \"../components/filter.min\", \"../components/conning-tower.min\" ] , (BigData, Filter) => {\n            BigData.init(this) ;\n            self.filter = new Filter($.extend({}, Filter.ESFDEFAULT,{\n                el: \".filter\",                \n                cityId: $('#visitedCityId').val(),                \n                BigData: BigData,                \n                controller: self,\n                near: true,\n                filterChanged: function(result){                         \n                    var param = self.paramGenerator.generateParamObj(result);\n                    if(param.di || param.to || param.li || param.st){\n                        // do nothing\n                    }else{// 判断是否有sid,sli,sst,sdi,sto\n                        var mapping = [\"sdi\",\"sto\",\"sli\",\"sst\",\"sid\"];\n                        mapping.forEach(function(item){\n                            if(self.param[item]){\n                                param[item] = self.param[item];\n                            }\n                        });                        \n                    }\n                    \n\n                    self.param = param;\n                    // 跳转\n                    self.goto();\n                }                \n            }));\n            new ConningTower({                \n                \"bigDataUtil\" : BigData ,               \n                \"moduleType\" : \"esf\" ,\n                \"cityClick\" : () => {\n                    \n                } ,                \n                \"searchResultItemClick\" : (data) => {\n                    // 与filter中的区域地铁互斥\n                    delete self.param.di;// 区域id\n                    delete self.param.to;// 板块id\n                    delete self.param.li;// 地铁线id\n                    delete self.param.st;// 地铁站id\n                    delete self.param.id;// 小区id\n                    delete self.param.sdi;// 区域id\n                    delete self.param.sto;// 板块id\n                    delete self.param.sli;// 地铁线id\n                    delete self.param.sst;// 地铁站id\n                    delete self.param.sid;// 小区id\n                    var mapping = [\"\",\"sdi\",\"sto\",\"sli\",\"sst\",\"sid\"];\n                    var key = mapping[data.type];\n                    if(key){\n                        self.param[key] = data.value;\n                        self.goto();\n                    }\n                },\n                \"locationCallback\": (data)=>{\n                    self.filter.setLocationInfo(data);\n                }\n            }) ;\n\n            \n\n            window.filter = self.filter;\n            self.BigData = BigData;\n            BigData.bigData({\n                \"pageName\": \"1068\",                       \n                \"type\": 1\n            });\n        }) ;\n\n        // 从url中解析参数\n        //var pageUrl = location.href;\n        var pageUrl = location.origin + location.pathname;\n        pageUrl = pageUrl.replace('//','');\n        var tmpArr = pageUrl.split('/');\n        self.param = {};\n        if(tmpArr[3]){// 有查询条件\n            var obj = ParamGenerator.queryString2Object(tmpArr[3]);\n            if(obj){\n                self.param = obj;\n            }\n        }                            \n\n        this.bindEvent();\n        this.pullload();\n        this.insertTrendAndOldHouse();\n    }        \n\n    // 根据查询条件进行相应的跳转\n    goto(){\n        var cityPinyin = $('#visitedCityPinyin').val();\n        var url = location.origin + \"/\" + cityPinyin + \"/esf/\" +ParamGenerator.object2QueryString(this.param);          \n        //var url = location.href;\n        // if(url.indexOf('esf/')>0){            \n        //     url += ParamGenerator.object2QueryString(this.param);                    \n        //     //location.href = \"./\" + ParamGenerator.object2QueryString(this.param);                    \n        // }else{\n        //     //location.href += \"/\" + ParamGenerator.object2QueryString(this.param);  \n        //     url += '/' + ParamGenerator.object2QueryString(this.param);                     \n        // }         \n\n        location.href = url + location.search;               \n    }\n\n    bindEvent(){\n        var self = this;\n        // 清空查询条件\n        $('.no-data button').click(function(){\n            // 跳转            \n            location.href = \"./\";\n        });\n    }\n    \n    createHouseItems(data){\n        var str = \"\";\n        var cityPinyin = $('#visitedCityPinyin').val();\n        var channel = $('#channel').val();\n        data.forEach(function(item){            \n            str += '<a href=\"/'+ cityPinyin + '/esf/' +  item.encryptHouseId+'.html' + (channel?'?channel='+channel:'') +'\" class=\"esf-item\" data-bigdata=\"'+ encodeURIComponent('{\"eventName\": \"1068028\", \"eventParam\": { \"house_id\": \"'+item.houseId+'\" }}')+'\">\\\n            <dl>\\\n                <dt><img src=\"'+item.houseImgUrl + '?x-oss-process=image/resize,w_150\" alt=\"'+item.estateName+'\" class=\"lazy\"></dt>\\\n                <dd class=\"title\">'+item.houseTitle+'</dd>\\\n                <dd>'+item.houseChild + \" \" + item.areaStr +' | ' + item.district + \" \" + item.town +' </dd>\\\n                <dd class=\"tags\">'\n                + (!item.tagList?\"\":item.tagList.map(function(tag){\n                    switch(tag){\n                        case \"降价\":\n                        return '<div class=\"promotion\"><span>降价</span></div>';\n                        case \"新上\":\n                        return '<div class=\"new\"><span>新上</span></div>';\n                        case \"满二\":\n                        return '<div class=\"over\"><span>满二</span></div>';\n                        case \"满五唯一\":\n                        return '<div class=\"over\"><span>满五唯一</span></div>';\n                        default:\n\n                        return '<div><span>'+tag+'</span></div>';\n                    }\n                    \n                }).join('') )\n                +                                  \n                '</dd>\\\n                <dd>\\\n                     <span class=\"money\">' + item.totalPrice + '万</span>\\\n                     <span class=\"price\">' + item.unitPrice + ' 元/㎡</span>\\\n                </dd>\\\n            </dl>\\\n        </a>';\n        });\n\n        return str;\n    }    \n\n    createHouseList(data,count){// 生成房源列表\n        this.hideNoData();\n        if(data && data.length){\n            $('.no-data').hide();\n            var str = this.createHouseItems(data);\n\n            $('#list').html(str);\n            $('.total .count').text(count);\n            $('.total').slideDown();\n            setTimeout(function(){\n                $('.total').slideUp();\n            }, 1500);\n\n            this.insertTrendAndOldHouse();\n        }else{// 没数据\n            this.showNoData();\n        }\n    }\n\n    appendHouseList(data){// 上拉滚动时加载数据\n        if(data&&data.length){\n            var str = this.createHouseItems(data);\n            $('#list').append(str);\n            this.insertTrendAndOldHouse();\n        }else{// 没有更多数据了\n            //this.showNoMore();\n        }\n    }\n\n    showNoData(){// 显示没有数据，并显示新房楼盘推荐\n        $('.no-data').show();\n        $('.total + div').html('');\n        $('.recommendation').show();// TODO:显示推荐楼盘\n    }\n\n    hideNoData(){\n        $('.no-data').hide();\n    }\n\n    hideNoMore(){\n        $('.reach-bottom').hide();\n    }\n\n    insertTrendAndOldHouse(){// 场景连篇       \n        var cityName = $('#visitedCityName').val();\n        var cityPinyin = $('#visitedCityPinyin').val();\n        var channel = $('#channel').val();\n        var $list = $('#list .esf-item');\n        if($('#list .scene.house-price').length == 0 && $list.length>9){\n            $('<a href=\"/'+cityPinyin+'/trend/esf'+(channel?\"?channel=\"+channel:\"\")+'\" class=\"scene house-price\">\\\n                <div class=\"img\"></div>\\\n                <div class=\"info\">\\\n                    <h3>'+cityName+'房价涨了还是跌了？</h3>\\\n                    <span class=\"detail\">去看看</span>\\\n                </div>\\\n            </a>').insertAfter($($list[9]));\n        }\n        if($('#list .scene.house').length == 0 && $list.length>19){\n            $('<a href=\"/'+cityPinyin+'/xflist/'+(channel?\"?channel=\"+channel:\"\")+'\" class=\"scene house\">\\\n                <div class=\"img\"></div>\\\n                <div class=\"info\">\\\n                    <h3>火爆高性价比新房</h3>\\\n                    <span class=\"detail\">去看看</span>\\\n                </div>\\\n            </a>').insertAfter($list[19]);\n        }\n    }\n\n    showError(){// 接口报错，分为两种，1. 筛选条件变更刷新 2. 上拉加载\n\n    }\n\n    // 上拉加载\n    pullload(){\n        let self = this ;\n        var cityId = $.cookie(\"xfSelectedCityId\");\n        var cityPinyin = $.cookie(\"xfSelectedCityPinyin\");\n        var cityName = $.cookie(\"xfSelectedCityName\");\n        \n        //二手房\n        $(\"#list\").pullload({\n            apiUrl : self.apiUrl.esf.list.houselist ,\n            queryStringObject : function(){\n                self.param && delete self.param.pa;\n                if(!self.param){\n                    self.param = {};\n                }\n                return $.extend({},self.param,{cityId: $('#visitedCityId').val()});\n            },   \n            requestType: \"POST\",\n            threshold : 50 ,\n            pageSize: 10,   \n            pageIndexKey: \"of\",\n            pageSizeKey: \"ps\",    \n            callback : function(data) {\n                \n                if( !data.data || !data.data.houseList || !data.data.houseList.length){\n                    data.count = 1;\n                    return;    \n                } \n\n                self.appendHouseList(data.data.houseList);                \n            }\n        }) ;\n    }\n}\n/*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n类的初始化\n-----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n$(document).ready(function() {\n    new ListController ;\n}) ;"]}