{"version":3,"sources":["components/conning-tower.min.js"],"names":["ConningTower","bigDataUtil","moduleType","cityClick","$","noop","searchResultItemClick","locationCallback","apiUrl","states","consts","val","detectSearchResultClick","addEventListener","location","$conningTowerCitySelectEntrance","click","popCitySelector","$investmentCitySwitch","$investment","addClass","removeClass","$hamburgMenu","document","body","css","$navigatorMask","fadeIn","$navigatorPop","animate","right","fadeOut","$conningTowerBack","history","back","$substituteMask","show","$searchInputBox","trigger","$searchBack","hide","$clearKeywords","$clearHistory","$searchResultList","empty","$searchResultListAssistant","window","localStorage","$appDownload","nativeSchema","loadSchema","schema","protocal","loadWaiting","failUrl","apkInfo","PKG","CATEGORY","ACTION","on","currentValue","trim","displayStatus","attr","searchHistory","JSON","parse","renderSearchResult","items","paramsMapper","request","search","requestData","parseInt","visitedCityId","success","result","data","append","$searchForm","submit","event","eq","preventDefault","ajax","url","dataType","error","e","tips","status","toString","message","name","frameMarginTop","is","$tabsHandles","$handler","currentTarget","cookie","text","retractCitySelector","href","combineUrl","typeMapper","typeValue","domesticCityList","forEach","city","has","businessList","business","businessId","shoupin","pinyin","charAt","toUpperCase","domestic","hasOwnProperty","push","cityId","cityName","cityType","overseaCityList","overseas","setVisitedCityCache","navigator","geolocation","locationStage","locationMessage","geoOpts","enableHighAccuracy","maximumAge","timeout","getCurrentPosition","position","latitude","coords","longitude","path","expires","getCityByLola","locationCityId","locationCityName","locationCityPinyin","cityPinyin","locationCityChina","china","replaceWith","code","PERMISSION_DENIED","locationFailCause","localtionFail","POSITION_UNAVAILABLE","TIMEOUT","UNKNOWN_ERROR","$citySelector","slideDown","bigData","children","length","businessCity","cities","filterBusinessCity","$ul","isEmptyObject","$status","$domesticFrame","createElement","key","$overseasFrame","citySelectorEventDelegate","visitedCityPinyin","modal","close","visitedCityName","visitedCityChina","urlArray","split","slice","join","source","$li","eventNameMapper","eventParam","estateDesc","encodeURIComponent","stringify","replace","markname","address","off","$item","hasClass","setSearchCache","decodeURIComponent","item","searchCache","noRepeatItems","each","index","cache","value","type","unshift","paramObj","ParamGenerator","queryString2Object"],"mappings":"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","file":"conning-tower.min.js","sourcesContent":["/*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n 1. 项目名称：悟空找房h5\n 2. 页面名称：components -> conning-tower(列表页司令塔，包括返回、搜索、汉堡菜单等信息)\n 3. 作者：zhaohuagang@lifang.com\n 4. 备注：\n    这里面定位需要用到的几个缓存key及缓存类型：\n    1). \"visitedCityId\" , \"visitedCityName\" , \"visitedCityPinyin\"，\"visitedCityChina\"，表示用户最后一次访问的当前moduleType的城市  使用cookie\n    2). \"selectedCityId\" , \"selectedCityName\" , \"selectedCityPinyin\"，\"selectedCityChina\"，表示用户选择的城市  使用cookie\n    3). locationLongitude , locationLatitude 定位的经纬度，这个一定要用cookie，因为埋点里面传递的值是从这里取的      \n5. 待完成任务：\n    1). setSearchCache方法写好了，判重还没有验证，在用户点击搜索结果项或者搜索表单提交的时候需要执行，只不过搜索表单提交相当于选择了搜索出来的第一条记录\n    2). 搜索框获得焦点或者keyup但是keywords为空的时候需要将搜索历史绘制出来\n -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n class ConningTower {\n     constructor({ bigDataUtil , moduleType , cityClick = $.noop , searchResultItemClick = $.noop , locationCallback = $.noop }) {\n         /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n        大数据埋点的工具引进来\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/ \n        this.bigDataUtil = bigDataUtil ;\n         /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n        模块类型，可以是：xf | esf | rent\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/  \n         this.moduleType = moduleType ; \n         /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n        几个api地址的配置\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n         this.apiUrl = {\n             \"search\" : \"/api/common/acWord\" ,   //搜索用的接口地址\n             \"businessCity\" : \"/api/common/businessCity\" ,   //获取业务开通城市接口地址\n             \"getCityByLola\" : \"/api/common/getCityByLatLon\"  //通过经纬度反查城市接口地址\n         } ;\n         /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n        几个接口方法 \n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/ \n         this.cityClick = cityClick ;  //城市选择器中城市点击接口事件\n         this.searchResultItemClick = searchResultItemClick ;  //搜索结果选项点击\n         this.locationCallback = locationCallback ;\n         /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n        几个状态值\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n        this.states = {\n            \"locationStage\" : 0 ,  //定位阶段： 0:还没有发起定位 | 1:开始定位 | 2:定位结束\n            \"locationMessage\" : null ,  //定位提示语，{城市}/正在定位中.../定位失败/定位服务暂未开启\n            \"locationFailCause\" : null , //定位失败原因\n            \"locationCityId\" : null ,\n            \"locationCityName\" : null ,\n            \"locationCityPinyin\" : null ,\n            \"locationCityChina\" : null\n        } ;\n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n        页面常量\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n        this.consts = {\n            \"visitedCityId\" : $(\"#visitedCityId\").val() ,\n            \"visitedCityName\" : $(\"#visitedCityName\").val() ,\n            \"visitedCityPinyin\" : $(\"#visitedCityPinyin\").val() ,\n            \"visitedCityChina\" : $(\"#visitedCityChina\").val() ,\n\n            \"$conningTowerCitySelectEntrance\" : $(\".conning-tower dl dt\") ,  //点击城市选择入口\n            \"$investment\" : $(\".notopen-investment\") ,  //未开通及招商弹层\n            \"$investmentCitySwitch\" : $(\".notopen-investment .change\") ,  //未开通及招商场景中切换城市链接\n            \"$hamburgMenu\" : $(\".conning-tower .hamburg-menu\") ,  //汉堡菜单\n            \"$appDownload\" : $(\".navigator-pop .app-download\") ,   //点击汉堡菜单弹出的菜单中app下载按钮\n            \"$navigatorMask\" : $(\".navigator-mask\") ,  //pop菜单遮罩\n            \"$navigatorPop\" : $(\".navigator-pop\") ,  //点击汉堡菜单弹出的菜单\n            \"$conningTowerBack\" : $(\".conning-tower .back\") ,  //司令塔假的搜索区域返回按钮\n            \"$substituteMask\" : $(\".substitute-mask\") ,  //搜索替身遮罩\n            \"$searchInputBox\" : $(\".substitute-mask .search-substitute .input-section input\") ,  //真搜索区域的搜索框\n            \"$searchBack\" : $(\".substitute-mask .search-substitute .back\") ,  //真搜索区域返回按钮\n            \"$clearKeywords\" : $(\".substitute-mask .search-substitute .input-section .icon-close\") , //清除搜索关键词\n            \"$clearHistory\" : $(\".substitute-mask .list-container .clear-history\") ,  //清除搜索历史按钮\n            \"$searchResultList\" : $(\".substitute-mask .list-container .list\") ,  //搜索结果列表\n            \"$searchResultListAssistant\" : $(\".substitute-mask .list-container div\") ,  //搜索结果列表助手，包括上面的\"搜索历史\"title和下面的清除历史按钮\n            \"$searchForm\" : $(\".substitute-mask .search-substitute form\") ,  //搜索表单\n            \"$citySelector\" : $(\".city-selector\")  //城市选择弹层\n        } ;\n\n         /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n        侦测是否有过搜索结果点击行为\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n         this.detectSearchResultClick() ;\n         /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n        事件绑定\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n         this.addEventListener() ;\n         /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n        发起定位\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n        this.location() ;        \n     }     \n     /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n    组件相关dom节点事件绑定\n     -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n     addEventListener() {\n         /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n        点击城市选择入口弹出城市选择器并根据是否有了数据来决定是否需要请求接口渲染\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n        this.consts.$conningTowerCitySelectEntrance.click(() => {\n            this.popCitySelector() ;\n        }) ;\n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n        未开通及招商场景中切换城市链接点击\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n        this.consts.$investmentCitySwitch.click(() => {\n            this.consts.$investment.addClass(\"hidden\").removeClass(\"visible\") ;\n            this.popCitySelector() ;\n        }) ;\n         /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n        点击汉堡菜单弹出子菜单\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n        this.consts.$hamburgMenu.click(() => {\n            $(document.body).css({ \"overflow-y\" : \"hidden\" }) ;  //滚动条隐藏\n            this.consts.$navigatorMask.fadeIn(100) ;\n            this.consts.$navigatorPop.animate( {\n                right : 0\n            } , 100 ) ;\n        }) ;\n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n        点击子菜单遮罩关闭子菜单\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n        this.consts.$navigatorMask.click(() => {\n            $(document.body).css({ \"overflow-y\" : \"auto\" }) ;  //如果有滚动条就显示  \n            this.consts.$navigatorMask.fadeOut(100) ;\n            this.consts.$navigatorPop.animate( {\n                right : \"-200px\"\n            } , 100 ) ;              \n        }) ;\n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n        点击司令塔家搜索返回按钮回退\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n        this.consts.$conningTowerBack.click(() => {\n            history.back() ;\n        }) ;\n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n        点击假的搜索区域出现真的搜索并将真的搜索框 focus\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n        $(\".conning-tower dl dd\").click(() => {\n            this.consts.$substituteMask.show(50) ;\n            this.consts.$searchInputBox.trigger(\"focus\") ;\n        }) ;\n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n        真搜索区域返回按钮事件监听\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n        this.consts.$searchBack.click(() => {\n            this.consts.$substituteMask.hide(50) ;\n        }) ;\n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n        真搜索区域清除输入图标事件监听\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n        this.consts.$clearKeywords.click(() => {\n            this.consts.$searchInputBox.val(\"\").trigger(\"focus\") ; \n            this.consts.$clearKeywords.hide() ;      \n        }) ;\n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n        清除搜索历史按钮事件监听       \n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/ \n        this.consts.$clearHistory.click(() => {            \n            this.consts.$searchResultList.empty() ;\n            this.consts.$searchResultListAssistant.hide(100) ;\n            delete window.localStorage[this.moduleType + \"SearchHistory\" ] ;\n        }) ;\n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n        pop菜单中的下载APP菜单事件监听\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n        this.consts.$appDownload.click(() => {\n            nativeSchema.loadSchema({               \n                schema : \"external_call\"  ,  // 通过NN打开某个链接\n                protocal : \"wkzf\" , //schema头协议，实际情况填写\n                loadWaiting : \"1500\" , //发起唤醒请求后，会等待loadWaiting时间，超时则跳转到failUrl，默认3000ms                \n                failUrl : \"https://m.wkzf.com/download/transit?from=esfList\" ,  //唤起失败时的跳转链接，默认跳转到下载页\n                // apk信息,请根据实际情况填写\n                apkInfo : {\n                    PKG : \"com.wukong.ua\" ,\n                    CATEGORY : \"android.intent.category.DEFAULT\" ,\n                    ACTION : \"android.intent.action.VIEW\"\n                }\n            }) ;\n        }) ;\n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n        真搜索区域输入监听以及focus监听，如果没有输入值就应该出搜索历史\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/        \n        this.consts.$searchInputBox.on(\"keyup focus\" , () => {\n            /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n            取得关键词内容\n            -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n            let currentValue = this.consts.$searchInputBox.val() ? $.trim(this.consts.$searchInputBox.val()) : \"\" ;\n            /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n            如果关键词有值，就要显示清除按钮\n            -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n            let displayStatus = currentValue ? \"block\" : \"none\" ;\n            this.consts.$clearKeywords.css({ \"display\" : displayStatus }) ;\n            /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n            如果关键词没有改变什么也不做\n            -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n            if( currentValue && currentValue == this.consts.$searchInputBox.attr(\"data-last\")) return ;\n            else {\n                /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n                先清除结果\n                -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n                this.consts.$searchResultList.empty() ;\n                this.consts.$searchResultListAssistant.hide(100) ;\n                /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n                如果关键词为空就要绘制搜索历史并直接返回\n                -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n                if( ! currentValue ) {\n                    let searchHistory = window.localStorage[this.moduleType + \"SearchHistory\" ] ;\n                    searchHistory = searchHistory ? JSON.parse(searchHistory) : [] ;\n                    searchHistory && this.renderSearchResult( { items : searchHistory , history : true }) ;\n                    this.consts.$searchInputBox.attr(\"data-last\" , currentValue) ; \n                    return ;\n                }\n                /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n                否则就发起请求\n                -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/            \n                let paramsMapper = { \"xf\" : \"newhouselist\" , \"esf\" : \"oldhouselist\" , \"rent\" : \"renthouselist\" } ;            \n                this.request({ \n                    apiUrl : this.apiUrl.search , \n                    requestData : { \"key\" : currentValue , \"pageName\" :  paramsMapper[this.moduleType] , \"cityId\" : parseInt( this.consts.visitedCityId , 10 ) } , \n                    success : (result) => {                    \n                        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n                        如果搜索无结果绘制相应节点\n                        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n                        if( result.data[\"secondHouseTotal\"] === 0 ) {\n                            $(\".substitute-mask .list-container .list\").empty().append(\"<li class=\\\"no-data\\\"><dl><dt>未找到该地址，请重新搜索</dt><dd>您可以更换其他关键字再试一次</dd></dl></li>\") ;\n                        }\n                        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n                        有结果的绘制\n                        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n                        else this.renderSearchResult({ \"items\" : result.data[\"secondHouseList\"] , \"history\" : false }) ;   \n                    } \n                }) ; \n                this.consts.$searchInputBox.attr(\"data-last\" , currentValue) ;  //最后将当前值记录到最后一次搜索关键词里面\n            }    \n            \n        }) ;\n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n        搜索表单提交相当于点击了第一个搜索结果项并阻止默认表单提交行为\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n        this.consts.$searchForm.submit((event) => {\n            $(\".substitute-mask .list-container .list li\").eq(0).trigger(\"click\") ;\n            event.preventDefault() ;\n        }) ;\n        \n     }\n     /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n    本组件ajax请求封装\n    -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n    request({ apiUrl , requestData , success = $.noop }) {\n        try {\n            $.ajax({\n                url : apiUrl ,                    \n                data : requestData ,\n                dataType : \"json\" ,                            \n                error : function(e) {\n                    $.tips( \"调用数据接口：\" + apiUrl + \" 失败！请测试您的数据接口！\" , 3 ) ;                                   \n                } ,\n                success : function(data) {                \n                    if (data.status.toString() === \"1\")  {\n                        //获取到接口数据，进行处理\n                        success(data) ;\n                    }\n                    else $.tips( data.message , 3 ) ;\n                }\n            }) ;\n        }\n        catch(e) {\n            $.tips( \"错误名称：\" + e.name + \"\\n错误描述：\" + e.message , 3 ) ;\n        }\n    }\n    /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n    等渲染好城市选择器后进行的事件委托\n    -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n     citySelectorEventDelegate() {         \n         /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------         \n        根据tabs-handle的显示状态决定tabs-frame的margin-top值\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n        let frameMarginTop = $(\".city-selector .caption .tabs-handle\").is(\":visible\") ? \"72px\" : \"28px\" ;\n        $(\".city-selector .tabs-frame\").css({ \"margin-top\" : frameMarginTop }) ;\n         /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------         \n        城市选择器中根据tabs-handle里面哪个句柄被选中来确定哪个tabs-frame显示\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/        \n        $(\".city-selector .tabs-frame.\" + $(\".city-selector .caption .tabs-handle li.on\").eq(0).data(\"sign\")).show() ;\n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n        城市选择器中tabs-handle的点击\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/ \n        let $tabsHandles = $(\".city-selector .caption .tabs-handle li\") ;\n        $tabsHandles.click(function(){\n            $tabsHandles.removeClass(\"on\") ;\n            $(this).addClass(\"on\") ;\n            $(\".city-selector .tabs-frame\").hide() ;\n            $(\".city-selector .tabs-frame.\" + $(this).data(\"sign\")).show() ;\n        }) ;\n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n        城市选择器中每个城市被点击后干什么?\n        1. 设置selected系列 cookie\n        2. 接着执行接口方法\n        3. 如果是当前城市就什么都不做，否则就然后直接跳转新城市\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n        $(\".city-selector .tabs-frame a\").click((event) => {\n            let $handler = $(event.currentTarget) ;\n            if( ! $handler.attr(\"data-cityid\")) return ;\n            $.cookie( \"selectedCityId\" , $handler.data(\"cityid\") ,  { \"path\" : \"/\" } ) ; \n            $.cookie( \"selectedCityName\" , $handler.text() ,  { \"path\" : \"/\" } ) ;\n            $.cookie( \"selectedCityPinyin\" , $handler.data(\"pinyin\") ,  { \"path\" : \"/\" } ) ;\n            $.cookie( \"selectedCityChina\" , $handler.data(\"china\") ,  { \"path\" : \"/\" } ) ;          \n            this.cityClick() ;\n            this.retractCitySelector() ;\n            if( $handler.data(\"cityid\") != this.consts.visitedCityId ) window.location.href = this.combineUrl( $handler.data(\"pinyin\") ) ;\n        }) ;\n     }\n     /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n    对接口拿到的业务开通城市进行处理\n    -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n    filterBusinessCity(data) {\n        let typeMapper = { \"esf\" : 1 , \"rent\" : 2 , \"xf\" : 3 } ;\n        let typeValue = typeMapper[this.moduleType] ;\n        let result = { \"domestic\" : {} , \"overseas\" : {} } ;\n        data && data.domesticCityList && data.domesticCityList.forEach((city) => {\n            let has = false ;\n            city.businessList && city.businessList.forEach((business) => {\n                if(business.businessId === typeValue) has = true ;\n            }) ;\n            if(has) {\n                let shoupin = city.pinyin.charAt(0).toUpperCase() ;\n                if( ! result.domestic.hasOwnProperty(shoupin)) result.domestic[shoupin] = [] ;\n                result.domestic[shoupin].push({ \"cityId\" : city.cityId , \"cityName\" : city.cityName , \"pinyin\" : city.pinyin , \"cityType\" : city.cityType }) ;\n            }\n        }) ;\n        data && data.overseaCityList && data.overseaCityList.forEach((city) => {\n            let has = false ;\n            city.businessList && city.businessList.forEach((business) => {\n                if(business.businessId === typeValue) has = true ;\n            }) ;\n            if(has) {\n                let shoupin = city.pinyin.charAt(0).toUpperCase() ;\n                if( ! result.overseas.hasOwnProperty(shoupin)) result.overseas[shoupin] = [] ;\n                result.overseas[shoupin].push({ \"cityId\" : city.cityId , \"cityName\" : city.cityName , \"pinyin\" : city.pinyin , \"cityType\" : city.cityType }) ;\n            } \n        }) ;\n        return result ;\n    }\n    /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n    发起定位\n    -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n    location() {              \n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n        首先要去判断是否有过浏览H5的页面，如果\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n        if( $.cookie(\"visitedCityId\") && $.cookie(\"visitedCityId\") != this.consts.visitedCityId && $.cookie(\"selectedCityId\") && $.cookie(\"selectedCityId\") != this.consts.visitedCityId ) {\n            //alert(\"先前访问过H5城市，并且选择过城市，这两个城市值都不等于路由城市，所以跳转到先前访问城市\") ;           \n            window.location.href = this.combineUrl($.cookie(\"visitedCityPinyin\")) ;\n            return ;\n        }\n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n        为了保证cookie的统一写入口，页面同步渲染的时候将城市信息放到页面隐藏域中，然后由FE来写到 cookie中\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n        this.setVisitedCityCache() ;\n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n        检查浏览器是否支持地理定位\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n        if( ! navigator.geolocation ) {\n            $.tips( \"您的浏览器不支持定位地理位置\" , 3 ) ;            \n            return ;\n        }\n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n        改写状态\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n        this.states.locationStage = 1 ;\n        this.states.locationMessage = \"正在定位中...\" ;        \n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n        定义定位选项\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n        let geoOpts = {\n            enableHighAccuracy : false ,   //表示是否高精度可用，为Boolean类型，默认为false，如果开启，响应时间会变慢，同时，在手机设备上会用掉更多的流量，也就是money了。\n            maximumAge : 0 , //表示应用程序的缓存时间。单位毫秒，默认是0，意味着每次请求都是立即去获取一个全新的对象内容。\n            timeout : 10 * 1000  //表示等待响应的最大时间，默认是0毫秒，表示无穷时间。\n        } ;\n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n        开始发起定位\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n        navigator.geolocation.getCurrentPosition( (position) => {\n            let latitude = position.coords.latitude ;\n            let longitude = position.coords.longitude ; \n            /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n            改写状态\n            -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n            this.states.locationStage = 2 ;\n            /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n            往cookie里面写经纬度\n            -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n            $.cookie(\"locationLatitude\" , latitude , { path : \"/\" , expires : 365 * 24 * 60 } ) ;\n            $.cookie(\"locationLongitude\" , longitude , { path : \"/\" , expires : 365 * 24 * 60 } ) ;\n            /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n            执行定位回调\n            -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n            this.locationCallback({ \"latitude\" : latitude , \"longitude\" : longitude }) ;              \n            /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n            根据经纬度反查城市信息\n            -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n            this.request({ \n                apiUrl : this.apiUrl.getCityByLola , \n                requestData : { \"latitude\" : latitude , \"longitude\" : longitude } , \n                success : (result) => {\n                    this.states.locationMessage = result.data.cityName ;\n                    /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n                    写入几个状态值\n                    -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n                    this.states.locationCityId = result.data.cityId ;\n                    this.states.locationCityName = result.data.cityName ;\n                    this.states.locationCityPinyin = result.data.cityPinyin ;\n                    this.states.locationCityChina = result.data.china ;                                 \n                    /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n                    城市选择弹层定位城市改写\n                    -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n                    $(\".city-selector .tabs-frame .location-city\").replaceWith(\"<a class=\\\"location-city\\\" data-cityid=\\\"\" + this.states.locationCityId + \"\\\" data-pinyin=\\\"\" + this.states.locationCityPinyin + \"\\\" data-china=\\\"\" + this.states.locationCityChina + \"\\\">\" + this.states.locationCityName + \"</a>\") ;\n                    /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n                    如果用户没有选择城市并且定位到的城市不是当前路由城市才会跳转到定位城市\n                    -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n                    if(  ! $.cookie(\"selectedCityPinyin\") && result.data.cityId != this.consts.visitedCityId ) {\n                        //alert(\"定位成功！没有用户选择的城市，而且定位城市不同于路由城市，将要直接跳转到定位城市！\") ;\n                        window.location.href = this.combineUrl(result.data.cityPinyin) ;\n                    }                                  \n                } \n            }) ;                       \n        } , ( error ) => {\n            this.states.locationStage = 2 ;  //标识定位已结束            \n            switch(error.code) {\n                case error.PERMISSION_DENIED :  // 用户阻止了授权                \n                this.states.locationMessage = \"定位服务暂未开启\" ;\n                this.states.locationFailCause = \"PERMISSION_DENIED\" ;                \n                this.localtionFail(false) ;               \n                break ;\n\n                case error.POSITION_UNAVAILABLE :  //定位信息无效\n                this.states.locationMessage = \"定位失败\" ;\n                this.states.locationFailCause = \"POSITION_UNAVAILABLE\" ;                   \n                this.localtionFail(true) ;\n                break ;\n\n                case error.TIMEOUT :  //定位超时\n                this.states.locationMessage = \"定位失败\" ;\n                this.states.locationFailCause = \"TIMEOUT\" ;                \n                this.localtionFail(true) ;\n                break ;\n\n                case error.UNKNOWN_ERROR :  //其他不可预知的错误  \n                this.states.locationMessage = \"定位失败\" ;\n                this.states.locationFailCause = \"UNKNOWN_ERROR\" ;                          \n                this.localtionFail(true) ;\n                break ;\n            }\n        } , geoOpts ) ;\n\n    }\n    /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n    收起城市选择器\n    -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n    retractCitySelector() {\n        this.consts.$citySelector.hide() ;\n        $(\"body>.container\").show() ;\n        $(document.body).css({ \"overflow-y\" : \"auto\" }) ;\n    }\n    /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n    弹出城市选择器\n    -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n    popCitySelector() {        \n        this.consts.$citySelector.slideDown(200) ;\n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n        房源隐藏，禁掉body的滚动条\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n        $(\"body>.container\").hide() ;\n        $(document.body).css({ \"overflow-y\" : \"hidden\" }) ;\n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n        埋点\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n        this.bigDataUtil.bigData({ \"pageName\" : \"1005\" , \"type\" : 1 }) ;\n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n        如果没有城市记录说明是第一次绘制，否则就不需要做什么\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n        if($(\".city-selector .tabs-frame\").children().length) return ;        \n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n        请求业务城市数据并绘制，绘制完后绑定事件\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n        this.request({ \n            apiUrl : this.apiUrl.businessCity , \n            requestData : { } , \n            success : (result) => {                    \n                let cities = this.filterBusinessCity(result.data) ;  //取出所有满足条件的城市清单   \n                //console.log(cities) ;                 \n                /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n                绘制tabs-handle\n                -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n                let $ul = \"<ul class=\\\"tabs-handle\\\"><li class=\\\"on\\\" data-sign=\\\"domestic\\\">国内</li><li data-sign=\\\"overseas\\\">国际</li></ul>\" ;\n                if( $.isEmptyObject(cities.domestic) || $.isEmptyObject(cities.overseas) ) {\n                    if( ! $.isEmptyObject(cities.domestic) ) $ul = \"<ul class=\\\"tabs-handle\\\" style=\\\"display : none\\\"><li class=\\\"on\\\" data-sign=\\\"domestic\\\">国内</li><li data-sign=\\\"overseas\\\">国际</li></ul>\" ;\n                    else $ul = \"<ul class=\\\"tabs-handle\\\" style=\\\"display : none\\\"><li data-sign=\\\"domestic\\\">国内</li><li class=\\\"on\\\" data-sign=\\\"overseas\\\">国际</li></ul>\" ;\n                }                                \n                $(\".city-selector .caption\").append($ul) ;\n                /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n                绘制tabs-frame\n                -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/ \n                let $status = ( this.states.locationStage == 2 && ! this.states.locationFailCause && this.states.locationCityName ) ? \"<a class=\\\"location-city\\\" data-cityid=\\\"\" + this.states.locationCityId + \"\\\" data-pinyin=\\\"\" + this.states.locationCityPinyin + \"\\\" data-china=\\\"\" + this.states.locationCityChina + \"\\\">\" + this.states.locationCityName + \"</a>\" : \"<a class=\\\"location-city\\\">\" + this.states.locationMessage + \"</a>\" ;\n\n                let $domesticFrame = $(document.createElement(\"DIV\")).addClass(\"tabs-frame domestic\") ;                \n                $domesticFrame.append( \"<span>定位城市</span>\" + $status ) ;\n                if(  ! $.isEmptyObject(cities.domestic) ) {\n                    for( let key in cities.domestic ) {\n                        $domesticFrame.append(\"<span>\" + key + \"</span>\") ;\n                        cities.domestic[key].forEach((city) => {\n                            $domesticFrame.append(\"<a data-cityid=\\\"\" + city.cityId + \"\\\" data-pinyin=\\\"\" + city.pinyin + \"\\\" data-china=\\\"\" + city.cityType + \"\\\">\" + city.cityName + \"</a>\") ;\n                        }) ;\n                    }\n                }\n                this.consts.$citySelector.append($domesticFrame) ;\n\n                let $overseasFrame = $(document.createElement(\"DIV\")).addClass(\"tabs-frame overseas\") ;\n                $overseasFrame.append( \"<span>定位城市</span>\" + $status ) ;\n                if(  ! $.isEmptyObject(cities.overseas) ) {\n                    for( let key in cities.overseas ) {\n                        $overseasFrame.append(\"<span>\" + key + \"</span>\") ;\n                        cities.overseas[key].forEach((city) => {\n                            $overseasFrame.append(\"<a data-cityid=\\\"\" + city.cityId + \"\\\" data-pinyin=\\\"\" + city.pinyin + \"\\\" data-china=\\\"\" + city.cityType + \"\\\">\" + city.cityName + \"</a>\") ;\n                        }) ;\n                    }\n                }\n                this.consts.$citySelector.append($overseasFrame) ;                \n                /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n                最后给dom节点绑定事件\n                -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n                this.citySelectorEventDelegate() ;\n            } \n        }) ; \n    }    \n    /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n    定位失败的处理    \n    -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n    localtionFail(tips) {\n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------        \n        1. 将定位cookie系列全部置空       \n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n        this.states.locationCityId = null ;\n        this.states.locationCityName = null ;\n        this.states.locationCityPinyin = null ;\n        this.states.locationCityChina = null ;\n        $.cookie(\"locationLatitude\" , null , { path : \"/\" , expires : 365 * 24 * 60 } ) ;\n        $.cookie(\"locationLongitude\" , null , { path : \"/\" , expires : 365 * 24 * 60 } ) ;         \n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------        \n        2. 先执行定位回调       \n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n        this.locationCallback() ;\n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------        \n        发现如果定位失败，发现城市选择弹层无法滑动，所以做了如下处理    \n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n        this.consts.$citySelector.css({ \"overflow\" : \"auto\" }) ;\n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------        \n        3. 改写城市选择弹层中定位城市占位符信息   \n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/        \n        $(\".city-selector .tabs-frame .location-city\").replaceWith(\"<a class=\\\"location-city\\\">\" + this.states.locationMessage + \"</a>\") ;        \n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n        4. 如果先前用户选择过城市就直接跳转到选择的城市，否则就根据tips来决定是否需要弹框选择\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n        if( $.cookie(\"selectedCityPinyin\")) {            \n            if( $.cookie(\"selectedCityPinyin\") != this.consts.visitedCityPinyin ) {\n                //alert(\"定位失败！而且用户选择过跟当前不同的城市，将要跳转到用户选择的城市...\" + this.combineUrl($.cookie(\"selectedCityPinyin\")) ) ;\n                window.location.href = this.combineUrl($.cookie(\"selectedCityPinyin\")) ;\n            }\n        }\n        else {\n            if( ! tips) this.popCitySelector() ;\n            else {\n                $.modal({\n                    \"id\" : \"orientateTimeoutDialog\" ,\n                    \"title\" : \"\" ,      \n                    \"content\" : \"定位失败<br>请手动选择您的城市\" ,\n                    \"buttons\" : [\n                        { \"text\" : \"去选择\" , \"className\" : \"goto-select-city\" , \"clickCallback\" : () => {\n                                $.modal.close(\"orientateTimeoutDialog\") ;\n                                this.popCitySelector() ;\n                            } \n                        } \n                    ]\n                }) ;\n            }            \n        }        \n    }\n    /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n    为了保证cookie的统一写入口，页面同步渲染的时候将城市信息放到页面隐藏域中，然后由FE来写到 cookie中\n    这个cookie的作用是为了满足prd里面要求的：有上次浏览城市信息就不要定位了\n    -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n    setVisitedCityCache() {        \n        $.cookie(\"visitedCityId\" , this.consts.visitedCityId , { \"path\" : \"/\" , expires : 365 * 24 * 60 } ) ;\n        $.cookie(\"visitedCityName\" , this.consts.visitedCityName , { \"path\" : \"/\" , expires : 365 * 24 * 60 } ) ;\n        $.cookie(\"visitedCityPinyin\" , this.consts.visitedCityPinyin , { \"path\" : \"/\" , expires : 365 * 24 * 60 } ) ;\n        $.cookie(\"visitedCityChina\" , this.consts.visitedCityChina , { \"path\" : \"/\" , expires : 365 * 24 * 60 } ) ;\n    }\n    /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n    通过城市拼音和模块类型组织列表页面跳转地址\n    -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n    combineUrl(cityPinyin) {\n        let urlArray = window.location.href.split(\"/\") ;\n        urlArray[3] = cityPinyin ;\n        urlArray = urlArray.slice( 0 , 5 ) ;\n        return urlArray.join(\"/\") ;\n    }\n    /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n    绘制搜索结果或者历史，history用来标识是否搜索历史\n    如果是搜索历史的渲染，每条历史应该是已经有了埋点参数了\n    -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n    renderSearchResult( { items , history = false }) {\n        items && items.forEach((source) => {\n            let $li = $(document.createElement(\"LI\")) ;            \n            /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n            埋点参数\n            -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n            let eventNameMapper = history ? { \"xf\" : \"1050010\" , \"esf\" : \"1068013\" , \"rent\" : \"\" } : { \"xf\" : \"1050011\" , \"esf\" : \"1068014\" , \"rent\" : \"\" } ;            \n            let eventParam = history ? { \"search_history\" : source.estateDesc } : { \"choice_content\" : source.estateDesc } ;\n            if(eventNameMapper[this.moduleType]) {\n                $li.attr(\"data-bigdata\" , encodeURIComponent(JSON.stringify({ \"eventName\" : eventNameMapper[this.moduleType] , \"eventParam\" : eventParam }))) ;\n            }          \n            /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n            其他信息全绑到节点上data-detail上\n            -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n            $li.attr(\"data-detail\" , encodeURIComponent(JSON.stringify(source)) ) ;\n            /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n            绘制单条搜索结果\n            -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/                              \n            $li.append(\"<dl><dt>\" + source.estateDesc.replace( source.markname , \"<span>\" + source.markname + \"</span>\" ) + \"</dt><dd>\" + source.address.replace( source.markname , \"<span>\" + source.markname + \"</span>\" ) + \"</dd></dl>\") ;\n            this.consts.$searchResultList.append($li) ;\n        }) ; \n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n        如果是渲染搜索历史，就要加上显示历史的按钮以及历史记录title        \n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/ \n        if( items && items.length && history) $(\".substitute-mask .list-container div\").show(100) ;\n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n        最后进行事件绑定\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/ \n        $(\".substitute-mask .list li\").off().click((event) => {\n            let $item = $(event.currentTarget) ;\n            if($item.hasClass(\"no-data\")) return ;             \n            this.setSearchCache(JSON.parse(decodeURIComponent($item.attr(\"data-detail\")))) ;\n            this.searchResultItemClick(JSON.parse(decodeURIComponent($item.attr(\"data-detail\")))) ;\n        }) ;      \n\n    }\n    /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n    将指定的对象数据记录到搜索localStorage中，最多记录5条\n    -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n    setSearchCache(item) {\n        let searchCache = window.localStorage[this.moduleType + \"SearchHistory\"] ;\n        searchCache = searchCache ? JSON.parse(searchCache) : [] ;\n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n        取得和当前项目部重复的前4条记录\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n        let noRepeatItems = [] ;\n        $.each( searchCache , ( index , cache ) => {\n            if( cache.value != item.value || cache.type != item.type ) noRepeatItems.push(cache) ;\n            if( noRepeatItems.length >= 4 ) return false ;\n        } ) ;\n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n        再在前面追加指定的哪条\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n         noRepeatItems.unshift(item) ;\n         /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n        最后重新设置到localStorage中\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n        window.localStorage[this.moduleType + \"SearchHistory\" ] = JSON.stringify(noRepeatItems) ;   \n    }\n    /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n    根据condition路由参数里面是否有：sli,sst,sdi,sto,sid ，分别对应li,st,di,to,id，为了区分这五个条件来自搜索模块，如果有就要在假的搜索区域展示this.moduleType + \"SearchHistory\"\n    这个localStorage里面缓存的搜索历史里面第一条\n    -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n    detectSearchResultClick() {\n        let urlArray = window.location.href.split(\"/\") ;        \n        let paramObj = ParamGenerator.queryString2Object(urlArray[5]) ;\n        if( paramObj.hasOwnProperty(\"sli\") || paramObj.hasOwnProperty(\"sst\") || paramObj.hasOwnProperty(\"sdi\") || paramObj.hasOwnProperty(\"sto\") || paramObj.hasOwnProperty(\"sid\")) {\n            let searchCache = window.localStorage[this.moduleType + \"SearchHistory\"] ;            \n            searchCache = searchCache ? JSON.parse(searchCache) : [] ;\n            if(searchCache.length) $(\".conning-tower dl dd span\").text(searchCache[0].estateDesc) ;\n        }       \n    }\n    /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n    整个组件定义结束\n    -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n }\n"]}