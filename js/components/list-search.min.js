"use strict";define(function(){var e=void 0,a=function(a,r,n,c,i){var l="",h="";if($("#searchInput").click(function(){if($(".rent-search").siblings("ul").addClass("on-hide"),$(".all-control").addClass("on-hide"),$(".search-result").show(),$(".show-result").hide(),$(".icon-hanbao").hide(),$("#searchInput").val()?$(".conone").show():$(".conone").hide(),o().channel?($(".rent-search").addClass("active-search-channel"),$(".cancel-channel").show(),$(".location-all").hide(),$("#searchInput").css({"background-color":"#F8F8F8",width:"100%"})):($(".input-kw-form").css({"background-color":"#f0f0f0"}),$(".rent-search").addClass("active-search"),$(".back").hide(),$(".fanhui").show(),$(".contwo").hide()),JSON.parse(localStorage.getItem("searchHistory"))&&!l){$("body").css("background-color","#F0F0F0"),$(".have-result").show();var s=JSON.parse(localStorage.getItem("searchHistory")).reverse(),c="",i=encodeURIComponent(JSON.stringify({eventName:"1203005",channel:a,type:2}));s.forEach(function(e,a){0==a?c='<li data-bigdata="'+i+' " data-type="'+e.type+'" data-value="'+e.id+'" data-name="'+e.key+'" data-address="'+e.address+'"><p>'+e.key+"</p><span>"+e.address+"</span></li>":c+='<li data-bigdata="'+i+' " data-type="'+e.type+'" data-value="'+e.id+'" data-name="'+e.key+'" data-address="'+e.address+'"><p>'+e.key+"</p><span>"+e.address+"</span></li>"}),$("#resultHistory").empty().append(c),$("#resultHistory >li").click(function(){var a=[];a=JSON.parse(localStorage.getItem("searchHistory"))?JSON.parse(localStorage.getItem("searchHistory")):[];var s=($(this).index(),{key:$(this).attr("data-name"),id:$(this).attr("data-value"),address:$(this).attr("data-address"),type:$(this).attr("data-type")});a.forEach(function(e,t){e.id==s.id&&e.type==s.type&&a.splice(t,1)}),a.push(s),localStorage.setItem("searchHistory",JSON.stringify(a)),delete r.di,delete r.to,delete r.li,delete r.st;var o=e.objectToString(r),c=$(this).attr("data-value"),i=$(this).attr("data-type");window.location.href=n+o+t(i,c)})}else $(".show-result").show(),$(".have-result").hide(),$("body").css("background-color","#FFF")}),$("#searchInput").on("keyup input",function(s){if($(this).val()){$(".conone").show(),$(".have-result").hide();var o=[],c={key:$(this).val(),cityId:i,pageName:"renthouselist"},d=encodeURIComponent(JSON.stringify({eventName:"1203004",channel:a,type:2}));if(e.request(e.apiUrl.common.acWord,c,{successCallback:function(a){var s=a.data;if(l=s.secondHouseList,s.secondHouseList){$(".show-result").show(),$(".no-result").hide(),$(".search-result").show();var c="",i="",u="";s.secondHouseList.forEach(function(e,a){c=e.estateDesc.replace(e.markname,"<span>"+e.markname+"</span>"),i=e.address.replace(e.markname,"<span>"+e.markname+"</span>"),u+='<li data-bigdata="'+d+' " data-type="'+e.type+'" data-value="'+e.value+'" data-name="'+e.estateDesc+'" data-address="'+e.address+'"><p>'+c+"</p><span>"+i+"</span></li>"}),$("#showResult").empty().append(u),$("body").css("background-color","#F0F0F0")}else $(".no-result").show(),$(".have-result").hide(),$(".show-result").hide(),$("body").css("background-color","#FFF");$("#showResult >li").click(function(){o=JSON.parse(localStorage.getItem("searchHistory"))?JSON.parse(localStorage.getItem("searchHistory")):[];var a={key:$(this).attr("data-name"),id:$(this).attr("data-value"),address:$(this).attr("data-address"),type:$(this).attr("data-type")};o.length>4&&o.reverse().splice(4),o.forEach(function(e,t){e.id==a.id&&e.type==a.type&&o.splice(t,1)});var s=o.reverse();s.push(a),localStorage.setItem("searchHistory",JSON.stringify(s)),delete r.di,delete r.to,delete r.li,delete r.st;var c=e.objectToString(r);h=$(this).attr("data-value");var i=$(this).attr("data-type");window.location.href=n+c+t(i,h)})}}),l&&13==s.keyCode){o=JSON.parse(localStorage.getItem("searchHistory"))?JSON.parse(localStorage.getItem("searchHistory")):[];var u={key:$("#showResult>li:eq(0)").attr("data-name"),id:$("#showResult>li:eq(0)").attr("data-value"),address:$("#showResult>li:eq(0)").attr("data-address"),type:$("#showResult>li:eq(0)").attr("data-type")};o.length>4&&o.reverse().splice(4);var p=o.reverse();p.push(u),localStorage.setItem("searchHistory",JSON.stringify(p)),delete r.di,delete r.to,delete r.li,delete r.st;var y=e.objectToString(r);h=$("#showResult>li:eq(0)").attr("data-value");var v=$("#showResult>li:eq(0)").attr("data-type");window.location.href=n+y+t(v,h)}}else $(".show-result").hide(),localStorage.getItem("searchHistory")?$(".have-result").show():$(".have-result").hide(),$("#showResult").empty()}),JSON.parse(localStorage.getItem("searchHistory"))&&s()){var d=JSON.parse(localStorage.getItem("searchHistory")).reverse()[0].key;$("#searchInput").val(d),$(".contwo").show()}$(".contwo").click(function(){$("#searchInput").val(""),$(".icon-close").hide(),$("#showResult").empty(),$(".no-result").hide(),$(".have-result").hide();var a=e.objectToString(r);window.location.href=n+a+c}),$(".conone").click(function(){$("#searchInput").val(""),$(".icon-close").hide(),$("#showResult").empty(),$(".no-result").hide(),JSON.parse(localStorage.getItem("searchHistory"))?($(".have-result").show(),$("body").css("background-color","#F0F0F0")):($(".have-result").hide(),$("body").css("background-color","#FFF"))}),o().channel?($(".rent-list").css({"box-shadow":" 0 0 0 0 rgba(0,0,0,.15)","background-color":"#fff"}),$(".search-input").css("width","96%"),$(".history-name").hide(),$(".icon-fanhui").hide(),$(".sort").hide(),$("#searchInput").val()?$(".conone").show():$(".conone").hide(),$(".cancel-channel").click(function(){$(this).hide(),$(".contwo").hide(),$(".conone").hide(),$(".all-control").removeClass("on-hide"),$(".search-result").hide(),$(".no-result").hide(),$(".back").hide(),$(".show-result").hide(),$("#showResult").empty(),$("#searchInput").val(""),$(".location-all").show(),$("#searchInput").css({"background-color":"#F8F8F8",width:"52%"}),$(".rent-search").siblings("ul").removeClass("on-hide"),$(".rent-search").removeClass("active-search-channel"),$("body").css("background-color","#F0F0F0")}),$(".location-all").click(function(){$.cookie("citySelectionOpen",1,{path:"/"})})):($(".input-kw-form").css({"background-color":"#FFF"}),$(".location-all").hide(),$(".sort").show(),$(".icon-hanbao").show())};$(".back").click(function(){window.location.href="/"}),$(".fanhui").click(function(){$(".input-kw-form").css({"background-color":"#fff"}),$(".rent-search").removeClass("active-search"),$(".all-control").removeClass("on-hide"),$(".rent-search").siblings("ul").removeClass("on-hide"),$(".search-result").hide(),$(".no-result").hide(),$(".back").show(),$(".icon-hanbao").show(),$(this).hide(),$(".contwo").hide(),$(".show-result").hide(),$("#searchInput").val(""),$(".conone").hide()}),$("#clearHistory").click(function(){localStorage.removeItem("searchHistory"),$("body").css("background-color","#FFF"),$(".have-result").hide()}),$(".input-kw-form").submit(function(e){e.preventDefault()});var t=function(e,a){var t="";return 1==e?t="?districtId="+a:2==e?t="?townId="+a:3==e?t="?subwayLine="+a:4==e?t="?subwayStation="+a:5==e&&(t="?subEstateId="+a),o().channel&&t?t=t+"&channel="+o().channel:o().channel&&!t?t="?channel="+o().channel:!o().channel&&t&&(t=t),t},s=function(){return!!(o().districtId||o().townId||o().subwayLine||o().subwayStation||o().subEstateId)},o=function(){var e=location.search,a={};if(e.indexOf("?")!==-1)for(var t=e.substr(1),s=t.split("&"),o=0;o<s.length;o++)a[s[o].split("=")[0]]=s[o].split("=")[1];return a};return{init:function(a){e=a},searchInputClick:a}});
//# sourceMappingURL=list-search.min.js.map
